<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>17thZJCPC | z01prime</title><meta name="author" content="z01prime"><meta name="copyright" content="z01prime"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="题面：   	      	    K - Killing the Brute-force 给定标程和暴力在 n &#x3D; 1, 2, . . . , m 时的运行时间，找到最小 的 n 使得三倍标程时限可以卡掉暴力 。m很小没什么好讲的就一个遍历找到最小的即可 1234567891011void solve()&amp;#123;	int m;	cin&gt;&gt;m;	vector&lt;int&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="17thZJCPC">
<meta property="og:url" content="http://example.com/2024/04/06/17thZJCPC/index.html">
<meta property="og:site_name" content="z01prime">
<meta property="og:description" content="题面：   	      	    K - Killing the Brute-force 给定标程和暴力在 n &#x3D; 1, 2, . . . , m 时的运行时间，找到最小 的 n 使得三倍标程时限可以卡掉暴力 。m很小没什么好讲的就一个遍历找到最小的即可 1234567891011void solve()&amp;#123;	int m;	cin&gt;&gt;m;	vector&lt;int&gt;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2025/03/06/EPO2kshMSWTZoHe.webp">
<meta property="article:published_time" content="2024-04-06T08:52:53.000Z">
<meta property="article:modified_time" content="2024-07-01T07:44:53.858Z">
<meta property="article:author" content="z01prime">
<meta property="article:tag" content="浙江">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2025/03/06/EPO2kshMSWTZoHe.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/04/06/17thZJCPC/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":700},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '17thZJCPC',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-07-01 15:44:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2025/03/06/EPO2kshMSWTZoHe.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 传送门</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://source.fomal.cc/img/dm8.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="z01prime"><span class="site-name">z01prime</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 传送门</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">17thZJCPC</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-06T08:52:53.000Z" title="发表于 2024-04-06 16:52:53">2024-04-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-01T07:44:53.858Z" title="更新于 2024-07-01 15:44:53">2024-07-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/XCPC%E7%9C%81%E8%B5%9B-%E9%82%80%E8%AF%B7%E8%B5%9B/">XCPC省赛/邀请赛</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="17thZJCPC"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>题面：</p>


	<div class="row">
    <embed src="en.pdf" width="100%" height="550" type="application/pdf">
	</div>



<h3 id="K-Killing-the-Brute-force"><a href="#K-Killing-the-Brute-force" class="headerlink" title="K - Killing the Brute-force"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/K">K - Killing the Brute-force</a></h3><p> 给定标程和暴力在 n = 1, 2, . . . , m 时的运行时间，找到最小 的 n 使得三倍标程时限可以卡掉暴力 。<br>m很小没什么好讲的就一个遍历找到最小的即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> m;</span><br><span class="line">	cin&gt;&gt;m;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(m)</span>,<span class="title">b</span><span class="params">(m)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;m;++i) cin&gt;&gt;a[i];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;m;++i) cin&gt;&gt;b[i];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;m;++i)</span><br><span class="line">		<span class="keyword">if</span>(a[i]*<span class="number">3</span>&lt;b[i])</span><br><span class="line">			<span class="keyword">return</span> cout&lt;&lt;i + <span class="number">1</span>&lt;&lt;endl,<span class="built_in">void</span>();</span><br><span class="line">	cout&lt;&lt;<span class="number">-1</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="A-AD-2020"><a href="#A-AD-2020" class="headerlink" title="A - AD 2020"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/A">A - AD 2020</a></h3><p> 给一个日期的区间，问有多少个日期含有子串“202”的。<br>2000.01.01 ≤ 日期 ≤ 9999.12.31<br>参考题解给的是直接打表然后O(1)回答，vp时队友是直接先打完表给它存数组里面结果代码过长cf交不上去……然后就乱搞了一下二分给他爆了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="type">int</span> cnt=<span class="number">1</span>;</span><br><span class="line">string pre[<span class="number">44295</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isleap</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x%<span class="number">4</span>==<span class="number">0</span> <span class="keyword">and</span> x%<span class="number">100</span>!=<span class="number">0</span> <span class="keyword">or</span> x%<span class="number">400</span>==<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> mon[<span class="number">13</span>]=&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"><span class="type">int</span> lmon[<span class="number">13</span>]=&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> y1,m1,d1,y2,m2,d2;</span><br><span class="line">    cin&gt;&gt;y1&gt;&gt;m1&gt;&gt;d1&gt;&gt;y2&gt;&gt;m2&gt;&gt;d2;</span><br><span class="line"> </span><br><span class="line">    string sl=<span class="built_in">to_string</span>(y1);</span><br><span class="line">    <span class="keyword">if</span>(m1&lt;<span class="number">10</span>)sl+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">    sl+=<span class="built_in">to_string</span>(m1);</span><br><span class="line">    <span class="keyword">if</span>(d1&lt;<span class="number">10</span>)sl+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">    sl+=<span class="built_in">to_string</span>(d1);</span><br><span class="line"> </span><br><span class="line">    string sr=<span class="built_in">to_string</span>(y2);</span><br><span class="line">    <span class="keyword">if</span>(m2&lt;<span class="number">10</span>)sr+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">    sr+=<span class="built_in">to_string</span>(m2);</span><br><span class="line">    <span class="keyword">if</span>(d2&lt;<span class="number">10</span>)sr+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">    sr+=<span class="built_in">to_string</span>(d2);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//小 -&gt; 大</span></span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=<span class="number">44294</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;<span class="comment">//第一个大于等于sl的日期</span></span><br><span class="line">        <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pre[mid]&lt;sl)l=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r=mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ansl=r;</span><br><span class="line"> </span><br><span class="line">    l=<span class="number">1</span>,r=<span class="number">44294</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;<span class="comment">//第一个小于等于sr的日期</span></span><br><span class="line">        <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pre[mid]&gt;sr)r=mid<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> l=mid;</span><br><span class="line">        <span class="keyword">if</span>(r==l+<span class="number">1</span>)<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pre[l+<span class="number">1</span>]&lt;=sr)l++;</span><br><span class="line">    <span class="type">int</span> ansr=l;</span><br><span class="line"> </span><br><span class="line">    cout&lt;&lt;ansr-ansl+<span class="number">1</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上直接在询问前预处理出来前缀和也不会超时的</p>
<h3 id="I-Invoking-the-Magic"><a href="#I-Invoking-the-Magic" class="headerlink" title="I - Invoking the Magic"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/I">I - Invoking the Magic</a></h3><p> 给定 n 对 pair，保证这 2n 个数一定由 n 个不同的数各出现 恰好两次构成。 将这些 pair 分成若干组，使得每组内出现的数都在该组内 出现恰好两次。 最小化最大的组包含的 pair 数。<br>n在1e5范围内。<br>如果按照关系建图就很容易发现是个连通块问题。直接离散化之后并查集即可。<br>这道题卡常居然，用stl离散化多写几个for直接t了，不知道当时比赛的测评机怎么样。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ll=<span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N],b[N],c[<span class="number">2</span>*N],d[<span class="number">2</span>*N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">        cin&gt;&gt;a[i]&gt;&gt;b[i];</span><br><span class="line">        <span class="comment">//1 3 5 7 9</span></span><br><span class="line">        <span class="type">int</span> idx=(i<span class="number">-1</span>)*<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">        c[idx]=a[i];</span><br><span class="line">        c[idx+<span class="number">1</span>]=b[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(c+<span class="number">1</span>,c+<span class="number">1</span>+<span class="number">2</span>*n);</span><br><span class="line">    <span class="type">int</span> dcnt=<span class="number">1</span>;</span><br><span class="line">    d[dcnt++]=c[<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">2</span>,<span class="number">2</span>*n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c[i]!=d[dcnt<span class="number">-1</span>])&#123;</span><br><span class="line">            d[dcnt++]=c[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1~dnct-1</span></span><br><span class="line"></span><br><span class="line">    map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;f;</span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,dcnt<span class="number">-1</span>)&#123;</span><br><span class="line">        f[d[i]]=i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">        a[i]=f[a[i]];</span><br><span class="line">        b[i]=f[b[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> g[dcnt];</span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,dcnt<span class="number">-1</span>)g[i]=i;</span><br><span class="line">    function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt;find=[&amp;](<span class="type">int</span> x)&#123;</span><br><span class="line">        <span class="keyword">if</span>(g[x]==x)<span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> g[x]=<span class="built_in">find</span>(g[x]);</span><br><span class="line">    &#125;;</span><br><span class="line">    function&lt;<span class="type">void</span>(<span class="type">int</span>,<span class="type">int</span>)&gt;unit=[&amp;](<span class="type">int</span> x,<span class="type">int</span> y)&#123;</span><br><span class="line">        <span class="type">int</span> g1=<span class="built_in">find</span>(g[x]),g2=<span class="built_in">find</span>(g[y]);</span><br><span class="line">        g[g1]=g2;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">        <span class="built_in">unit</span>(a[i],b[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans[dcnt];</span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">0</span>,dcnt<span class="number">-1</span>)ans[i]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,dcnt<span class="number">-1</span>)g[i]=<span class="built_in">find</span>(g[i]);</span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,dcnt<span class="number">-1</span>)ans[g[i]]++;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">per</span>(i,<span class="number">1</span>,dcnt<span class="number">-1</span>)&#123;</span><br><span class="line">        ans[<span class="number">0</span>]=<span class="built_in">max</span>(ans[i],ans[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="B-Bin-Packing-Problem"><a href="#B-Bin-Packing-Problem" class="headerlink" title="B - Bin Packing Problem"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/B">B - Bin Packing Problem</a></h3><p> 模拟 Bin Packing 问题的两个近似算法： (1) FF：每次找到最靠左的可以放下该物品的背包。 (2) BF：每次找到剩余容量最小的可以放下该物品的背包。<br>n小于等于1e6。</p>
<p>逆天歪榜题。赛后看题解发现是官方的评级是一道有金牌难度的题。vp也没想多久就给它A了。<br>第二个算法很好想，就是map里面用二分即可。<br>第一个首先是有一个单调性，因为找的是最左边的，所以存在一个边界，边界的左边的最大值一定是小于物品大小，从1号背包开始到边界的任意右边的区间的最大值一定大于物品大小，很显然的二分，由于枚举物品就要O(n)复杂度了，然后正常的二分，check里面又是线段树区间查询，O(n<em>logn</em>logn)是过不了1e6的，但是直接在线段树上做二分就没问题，能优化掉外围的一个log。<br>只能说板题学过就很简单</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Info</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegmentTree</span> &#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	std::vector&lt;Info&gt; info;</span><br><span class="line">	<span class="built_in">SegmentTree</span>() : <span class="built_in">n</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="built_in">SegmentTree</span>(<span class="type">int</span> n_, Info v_ = <span class="built_in">Info</span>()) &#123;</span><br><span class="line">		<span class="built_in">init</span>(n_, v_);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">	<span class="title">SegmentTree</span><span class="params">(std::vector&lt;T&gt; init_)</span> </span>&#123;</span><br><span class="line">		<span class="built_in">init</span>(init_);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> n_, Info v_ = Info())</span> </span>&#123;</span><br><span class="line">		<span class="built_in">init</span>(std::<span class="built_in">vector</span>&lt;Info&gt;(n_, v_));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">	<span class="type">void</span> <span class="title">init</span><span class="params">(std::vector&lt;T&gt; init_)</span> </span>&#123;</span><br><span class="line">		n = init_.<span class="built_in">size</span>();</span><br><span class="line">		info.<span class="built_in">assign</span>(<span class="number">4</span> &lt;&lt; std::__lg(n), <span class="built_in">Info</span>());</span><br><span class="line">		std::function&lt;<span class="type">void</span>(<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>)&gt; build = [&amp;](<span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r) &#123;</span><br><span class="line">			<span class="keyword">if</span> (r - l == <span class="number">1</span>) &#123;</span><br><span class="line">				info[p] = init_[l];</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="type">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">			<span class="built_in">build</span>(<span class="number">2</span> * p, l, m);</span><br><span class="line">			<span class="built_in">build</span>(<span class="number">2</span> * p + <span class="number">1</span>, m, r);</span><br><span class="line">			<span class="built_in">pull</span>(p);</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">build</span>(<span class="number">1</span>, <span class="number">0</span>, n);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">pull</span><span class="params">(<span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">		info[p] = info[<span class="number">2</span> * p] + info[<span class="number">2</span> * p + <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x, <span class="type">const</span> Info &amp;v)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (r - l == <span class="number">1</span>) &#123;</span><br><span class="line">			info[p] = v;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span> (x &lt; m) &#123;</span><br><span class="line">			<span class="built_in">modify</span>(<span class="number">2</span> * p, l, m, x, v);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">modify</span>(<span class="number">2</span> * p + <span class="number">1</span>, m, r, x, v);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">pull</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> p, <span class="type">const</span> Info &amp;v)</span> </span>&#123;</span><br><span class="line">		<span class="built_in">modify</span>(<span class="number">1</span>, <span class="number">0</span>, n, p, v);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Info <span class="title">rangeQuery</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (l &gt;= y || r &lt;= x) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="built_in">Info</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (l &gt;= x &amp;&amp; r &lt;= y) &#123;</span><br><span class="line">			<span class="keyword">return</span> info[p];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">rangeQuery</span>(<span class="number">2</span> * p, l, m, x, y) + <span class="built_in">rangeQuery</span>(<span class="number">2</span> * p + <span class="number">1</span>, m, r, x, y);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Info <span class="title">rangeQuery</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">rangeQuery</span>(<span class="number">1</span>, <span class="number">0</span>, n, l, r);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F&gt;</span></span><br><span class="line"><span class="function">	<span class="type">int</span> <span class="title">findFirst</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x, <span class="type">int</span> y, F pred)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (l &gt;= y || r &lt;= x || !<span class="built_in">pred</span>(info[p])) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (r - l == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> l;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">		<span class="type">int</span> res = <span class="built_in">findFirst</span>(<span class="number">2</span> * p, l, m, x, y, pred);</span><br><span class="line">		<span class="keyword">if</span> (res == <span class="number">-1</span>) &#123;</span><br><span class="line">			res = <span class="built_in">findFirst</span>(<span class="number">2</span> * p + <span class="number">1</span>, m, r, x, y, pred);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> res;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F&gt;</span></span><br><span class="line"><span class="function">	<span class="type">int</span> <span class="title">findFirst</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, F pred)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">findFirst</span>(<span class="number">1</span>, <span class="number">0</span>, n, l, r, pred);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">	<span class="type">int</span> maxn = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Info <span class="keyword">operator</span>+(Info a, Info b) &#123;</span><br><span class="line">	a.maxn = <span class="built_in">max</span>(a.maxn,b.maxn);</span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> n,c;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;c;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="function">SegmentTree&lt;Info&gt; <span class="title">seg</span><span class="params">(n+<span class="number">5</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">		cin&gt;&gt;a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">	seg.<span class="built_in">modify</span>(<span class="number">0</span>,Info&#123;c&#125;);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> i: a)&#123;</span><br><span class="line">		<span class="type">int</span> l = seg.<span class="built_in">findFirst</span>(<span class="number">0</span>,cnt,[&amp;](Info a)&#123;</span><br><span class="line">			<span class="keyword">return</span> a.maxn &gt;= i;</span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="keyword">if</span>(l == <span class="number">-1</span>)&#123;</span><br><span class="line">			cnt++;</span><br><span class="line">			seg.<span class="built_in">modify</span>(cnt<span class="number">-1</span>,Info&#123;c - i&#125;);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">int</span> maxn = seg.<span class="built_in">rangeQuery</span>(<span class="number">0</span>,l+<span class="number">1</span>).maxn;</span><br><span class="line">			seg.<span class="built_in">modify</span>(l,Info&#123;maxn - i&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;cnt&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	cnt = <span class="number">1</span>;</span><br><span class="line">	map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; mp;</span><br><span class="line">	mp[c] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i : a)&#123;</span><br><span class="line">		<span class="keyword">auto</span> t = mp.<span class="built_in">lower_bound</span>(i);</span><br><span class="line">		<span class="keyword">if</span>(t == mp.<span class="built_in">end</span>())&#123;</span><br><span class="line">			mp[c-i]++;</span><br><span class="line">			cnt++;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">auto</span> [x,y] = *t;</span><br><span class="line">		<span class="keyword">if</span>(--mp[x] == <span class="number">0</span>) mp.<span class="built_in">erase</span>(x);</span><br><span class="line">		mp[x-i]++;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;cnt&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cout.<span class="built_in">precision</span>(<span class="number">10</span>);</span><br><span class="line">	cout &lt;&lt; fixed;</span><br><span class="line">	<span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">	cin&gt;&gt;T;</span><br><span class="line">	<span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="K-Killing-the-Brute-force-1"><a href="#K-Killing-the-Brute-force-1" class="headerlink" title="K - Killing the Brute-force"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/K">K - Killing the Brute-force</a></h3><p>给这个dp转移方程<br>$dp[i][j]=\left\{\begin{array}{ll}<br>0 &amp; (i=0) \\<br>i^{2}+d p[i-1][j] &amp; (i&gt;0, j=0) \\<br>i^{2}+\max (d p[i-1][j], d p[i-1][j-1]+b[i]) &amp; (i&gt;0, j&gt;0)<br>\end{array}\right.$<br> 给定一个序列 a1, a2, . . . , an，q 次询问，每次询问在 a 的某 个区间跑 DP 时某个状态的 DP 值<br>打表之后可以发现是a数组中[l,r]的最大个k个数字之和再加上 1² + 2² + · · · + (r − l + 1)²<br>就是主席树板子题。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> rt[N],idx;</span><br><span class="line">ll pre[N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; num;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">    ll sum;</span><br><span class="line">    ll d;</span><br><span class="line">&#125;tr[N*<span class="number">40</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    pre[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=<span class="number">100005</span>;i++)</span><br><span class="line">        pre[i]=pre[i<span class="number">-1</span>]+i*i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> &amp;p,<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    p=++idx;</span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(tr[p].l,l,mid);</span><br><span class="line">    <span class="built_in">build</span>(tr[p].r,mid+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(num.<span class="built_in">begin</span>(),num.<span class="built_in">end</span>(),x)-num.<span class="built_in">begin</span>()+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> &amp;p,<span class="type">int</span> q,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> pos,<span class="type">int</span> cnt)</span></span>&#123;</span><br><span class="line">    p=++idx,tr[p]=tr[q];</span><br><span class="line">    tr[p].cnt+=<span class="number">1</span>,tr[p].sum+=cnt;</span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">        tr[p].d=cnt;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(pos&lt;=mid)</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].l,tr[q].l,l,mid,pos,cnt);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">insert</span>(tr[p].r,tr[q].r,mid+<span class="number">1</span>,r,pos,cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">        <span class="keyword">return</span> tr[p].d*k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> cnt=tr[tr[p].r].cnt-tr[tr[q].r].cnt;</span><br><span class="line">    <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(k&lt;=cnt)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(tr[p].r,tr[q].r,mid+<span class="number">1</span>,r,k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  tr[tr[p].r].sum-tr[tr[q].r].sum+<span class="built_in">query</span>(tr[p].l,tr[q].l,l,mid,k-cnt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin&gt;&gt;t;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">while</span>(t--)&#123;</span><br><span class="line">        cin&gt;&gt;n;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        idx=<span class="number">0</span>;</span><br><span class="line">        num.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">            num.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">            rt[i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">build</span>(rt[<span class="number">0</span>],<span class="number">1</span>,n);</span><br><span class="line">        <span class="built_in">sort</span>(num.<span class="built_in">begin</span>(),num.<span class="built_in">end</span>());</span><br><span class="line">        num.<span class="built_in">erase</span>(<span class="built_in">unique</span>(num.<span class="built_in">begin</span>(),num.<span class="built_in">end</span>()),num.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="built_in">insert</span>(rt[i],rt[i<span class="number">-1</span>],<span class="number">1</span>,n,<span class="built_in">find</span>(a[i]),a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> l,r,k;</span><br><span class="line">        <span class="type">int</span> q;</span><br><span class="line">        cin&gt;&gt;q;</span><br><span class="line">        <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;l,&amp;r,&amp;k);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,pre[(r-l+<span class="number">1</span>)]+<span class="built_in">query</span>(rt[r],rt[l<span class="number">-1</span>],<span class="number">1</span>,n,k));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码中54行原先板子求第k大是返回询问，这里改成求和即可。<br>出板题真的离大谱……既然B题已经是RMQ问题了为什么又出一道RMQ。<del>虽然没学过主席树但是算法书上有区间第k大和前k个之和的例题，正式比赛两三个小时学一个算法和一道板题应该容易得吧</del></p>
<h3 id="C-Crossword-Validation"><a href="#C-Crossword-Validation" class="headerlink" title="C - Crossword Validation"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/C">C - Crossword Validation</a></h3><p>你得到了一个在N×N网格上完成的填字游戏。每个单元格要么是填有字母的白色单元格，要么是黑色单元格。你还会得到一本包含M个不同单词的字典，其中每个单词都有一个与之相关的分数。网格中的一个横向候选词是在网格的同一行上的一串连续的字母，不能被扩展。从形式上看，这意味着候选词最左边的单元格要么不存在，要么是一个黑色单元格，最右边的单元格也是如此。垂直候选词的定义与此类似，只是字母在同一列。候选词对于水平词来说是从左到右阅读，对于垂直词来说是从上到下阅读。当且仅当每个候选词都出现在给定的词典中时，该填字游戏才是有效的。一个有效的字谜的分数是字典中与每个候选词相关的分数之和。请注意，两个或多个候选词可能是相同的。在这种情况下，该词的分数会相应地被多次加分。你的程序必须确定谜题的分数，否则就报告说它无效。</p>
<p>输入包含多个案例。输入的第一行包含一个正整数 $T$ ，即样例数。<br>对于每个案例，输入的第一行包含两个整数 $N, M \ (1 \le N \le 1\,000, 1 \le M \le 4\times 10^6)$ ，即网格大小和字典中的字数。接下来的 $N$ 行分别包含长度为 $N$ 的字符串，其中每个字符都是小写英文字母或 “#”。如果$i$-th字符串中的 $j$-th 字符是 “#”，那么位于$i$-th 行和$j$-th 列交叉处的单元格为黑色单元格。否则，该字符表示该单元格中填写的字母。下面的 $M$ 行分别包含一个仅由小写英文字母组成的非空字符串，以及一个正整数，表示字典中的一个单词及其得分。保证这些 $M$ 个单词是成对不同的，每个单词的长度不超过 $N$ ，每个单词的得分不超过 $10^9$ 。<br>保证所有情况下 $N^2$ 的总和不超过 $4\times 10^6$ ，所有情况下字典中所有单词的长度总和不超过 $4\times 10^6$ 。<br>输出<br>对于每个案例，在单行中打印一个整数，即输入中给出的字谜解决方案的分数，如果它是有效的。如果解决方案无效，则打印-1。</p>
<p>评价为阅读理解题，读懂了就是一个字典树问题。<br>对字典中的单词建树。每个单词的末尾都改为对应的分数大小，即代码中的<code>tot[now] = v</code>。然后枚举所有的网格中的字符串，横着枚举一遍，竖着枚举一遍，如果有不匹配或者是一个单词的前缀（即结束时<code>tot[now] == 0</code>）那么就是无解输出-1，否则加上分数输出总分即可。<br>几个细节：<br>1.字典树的空间复杂度很高，对于习惯不好的人比如我直接<code>#define int long long</code>那么容易爆空间，最好还是算一下哪些变量会爆int，做这道题最终的总分会爆，不开long long会wa<br>2.字典树模板是求前缀，但是这道题如果是前缀（子串）也应该是返回非法，所以要判断<code>!tot[now]</code>。<br>其他就套模板即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 4000006</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, nxt[N][<span class="number">30</span>], cnt;</span><br><span class="line"><span class="type">int</span> tot[N];</span><br><span class="line"><span class="type">char</span> str[<span class="number">1003</span>];</span><br><span class="line"><span class="type">char</span> mp[<span class="number">1003</span>][<span class="number">10004</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getNum</span><span class="params">(<span class="type">char</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">char</span> s[], <span class="type">int</span> v)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> len = (<span class="type">int</span>) <span class="built_in">strlen</span>(s), now = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x; i &lt; len; ++i) &#123;</span><br><span class="line">		x = <span class="built_in">getNum</span>(s[i]);</span><br><span class="line">		<span class="keyword">if</span> (!nxt[now][x]) nxt[now][x] = ++cnt;</span><br><span class="line">		now = nxt[now][x];</span><br><span class="line"><span class="comment">//		++tot[now];</span></span><br><span class="line">	&#125;</span><br><span class="line">	tot[now] += v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">char</span> s[])</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> len = (<span class="type">int</span>) <span class="built_in">strlen</span>(s), now = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x; i &lt; len; ++i) &#123;</span><br><span class="line">		x = <span class="built_in">getNum</span>(s[i]);</span><br><span class="line">		<span class="keyword">if</span> (!nxt[now][x]) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">else</span> now = nxt[now][x];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (!tot[now]) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> tot[now];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= cnt; i++) &#123;</span><br><span class="line">		<span class="built_in">memset</span>(nxt[i], <span class="number">0</span>, <span class="keyword">sizeof</span> nxt[i]);</span><br><span class="line">		tot[i] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) </span><br><span class="line">		cin &gt;&gt; mp[i] + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">		<span class="type">int</span> v;</span><br><span class="line">		cin &gt;&gt; str &gt;&gt; v;</span><br><span class="line">		<span class="built_in">insert</span>(str, v);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">			<span class="keyword">if</span> (mp[i][j] == <span class="string">&#x27;#&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span> (mp[i][j] != <span class="string">&#x27;#&#x27;</span> &amp;&amp; j &lt;= n)</span><br><span class="line">				str[k++] = mp[i][j++];</span><br><span class="line">			str[k] = <span class="number">0</span>;</span><br><span class="line">			<span class="type">int</span> res = <span class="built_in">find</span>(str);</span><br><span class="line">			<span class="keyword">if</span> (~res) ans += res;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">return</span> cout &lt;&lt; res &lt;&lt; endl, <span class="built_in">void</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">			<span class="keyword">if</span> (mp[i][j] == <span class="string">&#x27;#&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span> (mp[i][j] != <span class="string">&#x27;#&#x27;</span> &amp;&amp; i &lt;= n)</span><br><span class="line">				str[k++] = mp[i++][j];</span><br><span class="line">			str[k] = <span class="number">0</span>;</span><br><span class="line">			<span class="type">int</span> res = <span class="built_in">find</span>(str);</span><br><span class="line">			<span class="keyword">if</span> (~res) ans += res;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">return</span> cout &lt;&lt; res &lt;&lt; endl, <span class="built_in">void</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cout.<span class="built_in">precision</span>(<span class="number">10</span>);</span><br><span class="line">	cout &lt;&lt; fixed;</span><br><span class="line">	<span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">	cin &gt;&gt; T;</span><br><span class="line">	<span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="G-Gliding"><a href="#G-Gliding" class="headerlink" title="G - Gliding"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102770/problem/G">G - Gliding</a></h3><p>林克喜欢酷炫的挑战，比如从小孔射箭、从 3000 米高的雪山上滑下来，以及用一片巨大的树叶演奏音乐。现在他正在尝试一项新的挑战，在湖中滑行而不沉入湖中。<br>Link的世界是一个三维空间，我们定义一个笛卡尔坐标系 $(x,y,z)$ ，其中 $z$ 是高度。水面是平面 $z=0$ 。链接从位置 $(s_x,s_y,0)$ 开始，目标位于 $(t_x,t_y,0)$ 。如果在任何时候他的高度 $z$ 严格小于 $0 \ (z<0)$ ，则他挑战失败，这意味着他掉进了水里。 在林克的世界里，与地球不同，空气中的物体以 $v_f$ 的恒定速度自由落体。在如此快的坠落速度下，林克无法控制自己的身体，会以零水平速度垂直坠落。幸运的是，林克有滑翔伞来减缓坠落的速度。一旦他打开滑翔伞，下落速度就会变成 $v_p$ ，且 $v_p < v_f$ 。林克能够以最多 $v_h$ 的速度向任何方向水平移动。形式上，link 在 $x$ 方向 $v_x$ ， $y$ 方向上的$v_y$ 速度应满足 $\sqrt{v_x^2+v_y^2} \leq v_h$ 。林克可以多次关闭和打开滑翔伞，而且他可以随时这样做。 对林克来说更好的是，湖里有 $n+1$ 奇怪的风洞，产生向上吹的风，帮助林克飞得更高。这些风穴的编号从 $0$ 到 $n$ ，并由元组$(x_i,y_i,v_i),i="0,1,\dots,n$描述。第" $i$ 个风洞的位置是 $(x_i,y_i,0)$ ，其向上风的速度是 $v_i$ 。林克必须位于垂直线$[ x="x_i,y=y_i]$上，并且他的滑翔伞必须打开才能受到第" 个洞穴的影响。如果林克的滑翔伞在第 个风穴顶部打开，如果 $v_i>v_p$ ，他将以速度 $v_i-v_p$ 上升，如果 $v_p&gt;v_i$ ，他将以速度 $v_p-v_i$ 下降，或者垂直速度为零如果 $v_p=v_i$ 。 Link开始的位置是第 $0$ 个风洞，意思是 $s_x=x_0, s_y=y_0$ 。林克仔细地选择了这个位置，使得 $v_0&gt;v_p$ ，这意味着他最初可以升到他想要的高度。因此，可以证明，只要有足够的时间，林克总能到达目的地而不会掉进湖里。<br>林克打开和关闭滑翔伞所需的时间以及改变速度所需的时间可以忽略不计。 Link 想知道到达目的地所需的最短时间。</0)$></p>
<p>玩塞尔达玩的。<br>一个简单的dp问题，令<code>dp[i]</code>表示最终在第i个风洞的位置所需要的最短时间，那么可以枚举上一个风洞的位置，从上一个位置转移过来，然后发现好像和在这之前的速度最大的风洞上面多停几秒肯定优于在比它速度小的风洞上停留的时间短。<br>那么这样就和之前的选择有关联，无法dp。<br>但是题目对于先去哪个风洞并没有要求，所以直接对风洞的速度大小进行从小到大排序即可，那么从小到大枚举当前风洞，此时的风洞速度一定是目前去过的所有风洞中最大的那个，然后再枚举要去的风洞，因为显然飞到想去的点的位置时林克刚好位于水平面是最不浪费时间的，所以<code>dp[J] = min(dp[J],dp[I] + t + h/v);</code>转移，其中<code>t</code>是过去要花的时间，<code>h/v</code>是最少需要上升h的高度所需要的时间。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> s1, s2, t1, t2;</span><br><span class="line">	cin &gt;&gt; s1 &gt;&gt; s2 &gt;&gt; t1 &gt;&gt; t2;</span><br><span class="line">	<span class="type">int</span> vf, vp, vh;</span><br><span class="line">	cin &gt;&gt; vf &gt;&gt; vp &gt;&gt; vh;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	vector&lt;array&lt;<span class="type">int</span>, 3&gt;&gt; <span class="built_in">cave</span>(n + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="type">int</span> x, y, v;</span><br><span class="line">		cin &gt;&gt; x &gt;&gt; y &gt;&gt; v;</span><br><span class="line">		cave[i] = &#123;x, y, v&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">	cave.<span class="built_in">push_back</span>(&#123;t1, t2, <span class="number">0</span>&#125;);</span><br><span class="line">	<span class="keyword">auto</span> getDis = [&amp;](<span class="type">double</span> x1, <span class="type">double</span> y, <span class="type">double</span> x2, <span class="type">double</span> y2) -&gt; <span class="type">double</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">sqrt</span>((x1 - x2) * (x1 - x2) + (y - y2) * (y - y2));</span><br><span class="line">	&#125;;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">double</span>&gt;&gt; dist = <span class="built_in">vector</span>(n + <span class="number">2</span>, <span class="built_in">vector</span>(n + <span class="number">2</span>, (<span class="type">double</span>)<span class="number">0</span>));</span><br><span class="line">	<span class="function">vector&lt;<span class="type">double</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">3</span>, (<span class="type">double</span>)<span class="number">1e14</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n + <span class="number">1</span>; ++i)</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= n + <span class="number">1</span>; ++j)</span><br><span class="line">			dist[i][j] = dist[j][i] = <span class="built_in">getDis</span>(cave[i][<span class="number">0</span>], cave[i][<span class="number">1</span>], cave[j][<span class="number">0</span>], cave[j][<span class="number">1</span>]);</span><br><span class="line">	</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n + <span class="number">1</span>; ++i) p.<span class="built_in">push_back</span>(i);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">sort</span>(p.<span class="built_in">begin</span>() + <span class="number">1</span>,p.<span class="built_in">end</span>() - <span class="number">1</span>,[&amp;](<span class="type">int</span> a, <span class="type">int</span> b) &#123;</span><br><span class="line">		<span class="keyword">return</span> cave[a][<span class="number">2</span>] &lt;= cave[b][<span class="number">2</span>];</span><br><span class="line">	&#125;);</span><br><span class="line">	dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) </span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = i+<span class="number">1</span>; j &lt;= n + <span class="number">1</span>; ++j) &#123; <span class="comment">//这里枚举的时候j从0开始也没问题反正不影响结果</span></span><br><span class="line">			<span class="type">int</span> I = p[i],J = p[j];</span><br><span class="line">			<span class="type">double</span> v = cave[I][<span class="number">2</span>] - vp;</span><br><span class="line">			<span class="keyword">if</span>(v &gt; <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="type">double</span> t = dist[I][J]/vh;</span><br><span class="line">				<span class="type">double</span> h = t*vp;</span><br><span class="line">				dp[J] = <span class="built_in">min</span>(dp[J],dp[I] + t + h/v);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	cout&lt;&lt;dp[n+<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">z01prime</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="http://z01prime.github.io/2024/04/06/17thZJCPC/">http://z01prime.github.io/2024/04/06/17thZJCPC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">z01prime</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B5%99%E6%B1%9F/">浙江</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2025/03/06/EPO2kshMSWTZoHe.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/06/18thZJCPC/" title="18thZJCPC"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">18thZJCPC</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/31/2024%E5%B9%B4%E5%BA%A6%E7%AC%AC%E4%BA%94%E5%B1%8A%E5%85%A8%E5%9B%BD%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%8C%91%E6%88%98%E8%B5%9B%EF%BC%88%E6%98%A5%E5%AD%A3%E8%B5%9B%EF%BC%89/" title="2024年度第五届全国大学生算法设计与编程挑战赛（春季赛）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2024年度第五届全国大学生算法设计与编程挑战赛（春季赛）</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2025/03/06/EPO2kshMSWTZoHe.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">z01prime</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/z01prime"><i class="fab fa-github"></i><span>我的github主页</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/z01prime" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:z7296091@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">加载慢可以挂个梯子试试捏</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#K-Killing-the-Brute-force"><span class="toc-number">1.</span> <span class="toc-text">K - Killing the Brute-force</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-AD-2020"><span class="toc-number">2.</span> <span class="toc-text">A - AD 2020</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-Invoking-the-Magic"><span class="toc-number">3.</span> <span class="toc-text">I - Invoking the Magic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-Bin-Packing-Problem"><span class="toc-number">4.</span> <span class="toc-text">B - Bin Packing Problem</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#K-Killing-the-Brute-force-1"><span class="toc-number">5.</span> <span class="toc-text">K - Killing the Brute-force</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Crossword-Validation"><span class="toc-number">6.</span> <span class="toc-text">C - Crossword Validation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#G-Gliding"><span class="toc-number">7.</span> <span class="toc-text">G - Gliding</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/21/2021SCCPC/" title="2021SCCPC">2021SCCPC</a><time datetime="2025-04-21T06:40:56.000Z" title="发表于 2025-04-21 14:40:56">2025-04-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/31/2024CCPC%E5%B1%B1%E4%B8%9C%E9%82%80%E8%AF%B7%E8%B5%9B/" title="2024CCPC山东邀请赛">2024CCPC山东邀请赛</a><time datetime="2024-12-31T07:43:10.000Z" title="发表于 2024-12-31 15:43:10">2024-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/22/2024HNCPC/" title="2024HNCPC">2024HNCPC</a><time datetime="2024-11-22T08:50:44.000Z" title="发表于 2024-11-22 16:50:44">2024-11-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/25/2024ICPC%E6%98%86%E6%98%8E%E9%82%80%E8%AF%B7%E8%B5%9B/" title="2024ICPC昆明邀请赛">2024ICPC昆明邀请赛</a><time datetime="2024-10-25T01:50:33.000Z" title="发表于 2024-10-25 09:50:33">2024-10-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/18/2024JXCPC/" title="2024JXCPC">2024JXCPC</a><time datetime="2024-09-18T09:55:40.000Z" title="发表于 2024-09-18 17:55:40">2024-09-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://source.fomal.cc/img/dm8.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By z01prime</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'e8f61b4db601b696558e',
      clientSecret: '2f5cacaf3b111d5db02b1b40be93f02553bf9aa4',
      repo: 'commetForGitalk',
      owner: 'z01prime',
      admin: ['z01prime'],
      id: 'b2af8fd2126c10c252986adb5b87ae8f',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.textContent= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="25" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>