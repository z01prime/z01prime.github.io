<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>20thZJCPC | z01prime</title><meta name="author" content="z01prime"><meta name="copyright" content="z01prime"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="省赛补题，顺序大致按难度(赛时通过人数)排列 CF的gym里暂时还没有今年省赛的题目上传，目前只查到了D&#x2F;F&#x2F;G&#x2F;H&#x2F;I的补题链接2023.08.22 A.Look and Say 翻译： 给一个数字序列，你需要使用以下方法“描述”它： 1.每段划分成最大的连续相同的数字； 2 . 对于每段，将其替换为段的长度加段中的数字。例如，“0” 应替换为 “10”， ”9999999999“ 应替换为“1">
<meta property="og:type" content="article">
<meta property="og:title" content="20thZJCPC">
<meta property="og:url" content="http://example.com/2023/08/19/20thZJCPC/index.html">
<meta property="og:site_name" content="z01prime">
<meta property="og:description" content="省赛补题，顺序大致按难度(赛时通过人数)排列 CF的gym里暂时还没有今年省赛的题目上传，目前只查到了D&#x2F;F&#x2F;G&#x2F;H&#x2F;I的补题链接2023.08.22 A.Look and Say 翻译： 给一个数字序列，你需要使用以下方法“描述”它： 1.每段划分成最大的连续相同的数字； 2 . 对于每段，将其替换为段的长度加段中的数字。例如，“0” 应替换为 “10”， ”9999999999“ 应替换为“1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-08-19T06:19:28.000Z">
<meta property="article:modified_time" content="2024-02-09T03:29:35.139Z">
<meta property="article:author" content="z01prime">
<meta property="article:tag" content="浙江">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/08/19/20thZJCPC/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":700},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '20thZJCPC',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-02-09 11:29:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 传送门</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://source.fomal.cc/img/dm8.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="z01prime"><span class="site-name">z01prime</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 传送门</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">20thZJCPC</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-19T06:19:28.000Z" title="发表于 2023-08-19 14:19:28">2023-08-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-09T03:29:35.139Z" title="更新于 2024-02-09 11:29:35">2024-02-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ICPC%E7%9C%81%E8%B5%9B/">ICPC省赛</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="20thZJCPC"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>省赛补题，顺序大致按难度(赛时通过人数)排列</p>
<p>CF的gym里暂时还没有今年省赛的题目上传，目前只查到了<a target="_blank" rel="noopener" href="https://qoj.ac/contest/1221">D/F/G/H/I的补题链接</a><br>2023.08.22<br><a name="D6zKp"></a></p>
<h1 id="A-Look-and-Say"><a href="#A-Look-and-Say" class="headerlink" title="A.Look and Say"></a>A.Look and Say</h1><p><img src="/2023/08/19/20thZJCPC/lookAndSay.png" alt="lookAndSay"></p>
<p>翻译：</p>
<p>给一个数字序列，你需要使用以下方法“描述”它：</p>
<p>1.每段划分成最大的连续相同的数字；</p>
<p>2 . 对于每段，将其替换为段的长度加段中的数字。例如，“0” 应替换为 “10”， ”9999999999“ 应替换为“109” </p>
<p>3.将替换的段连接在一起并输出</p>
<p>输入：</p>
<p>第一行包含一个整数n，范围是[1,1000]，表示输入序列的长度；</p>
<p>第二行为一个长度为n的序列，表示原始序列</p>
<p>输出：</p>
<p>输出转换后的序列</p>
<p>签到题，就是相同连续的数字压缩成长度+数字的组合输出</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, cnt = <span class="number">1</span>;</span><br><span class="line"><span class="type">char</span> pre = <span class="string">&#x27;#&#x27;</span>, t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;my.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span> (t == pre)++cnt;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pre != <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">            cout &lt;&lt; cnt &lt;&lt; pre;</span><br><span class="line">            cnt = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = t;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; t;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="NaOBs"></a></p>
<h1 id="E-Interval-Sum"><a href="#E-Interval-Sum" class="headerlink" title="E.Interval Sum"></a>E.Interval Sum</h1><p><img src="/2023/08/19/20thZJCPC/IntervalSum.png" alt></p>
<p>翻译</p>
<p>构造一个长度为n的排列，使其所有子序列的和中能够被n整除的子序列的个数最多，输出任意一种构造。</p>
<p>输入：</p>
<p>一个n，表示排列的长度</p>
<p>输出：</p>
<p>一行排列，空格分开排列中的元素</p>
<p>一道贪心题，猜想比较好想：考虑哪些数相加为n，有n，{1，n-1},{2,n-2}…..注意n是偶数时，要把n放排列的最前面或者最后面，并且最后没有{n/2,n-n/2}这种组合</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;my.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    t = n / <span class="number">2</span> + (n &amp; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (!(n &amp; <span class="number">1</span>))cout &lt;&lt; n / <span class="number">2</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; t; ++i) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; n - i&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这道题<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P9573">P9573 「TAOI-2」核心共振</a>和它比较像，但更难一点<br><a name="G8CRf"></a></p>
<h1 id="M-A-Wine-and-Four-Dishes"><a href="#M-A-Wine-and-Four-Dishes" class="headerlink" title="M.A Wine and Four Dishes"></a>M.A Wine and Four Dishes</h1><p><img src="/2023/08/19/20thZJCPC/AWineandFourDishes.png" alt></p>
<p>翻译：</p>
<p>Rice老师为自己准备了一场盛宴。宴会上有x瓶酒和y盘菜，这意味着他需要x杯和y盘。</p>
<p>有n个箱子。第i个盒子里有a杯子和b盘子。请帮助Rice老师确定他必须打开的最小数量的盒子，这样他才能收集到足够的杯子和盘子。如果Rice老师不可能收集到足够的杯子或盘子，那么输出“IMPOSSIBLE”。</p>
<p>输入</p>
<p>第一行包含了三个整数n,x,y表示箱子数，瓶子和盘子数</p>
<p>接下来n行表示每个箱子含有的瓶子和盘子数量</p>
<p>输出</p>
<p>最小数量的盒子，无解输出IMPOSSIBLE</p>
<p>贪心题，注意到每个箱子包含的盘子数是[0,1]，所以如果x不是0，那么优先从含有x的箱子中选最大的那几个，选完了就选剩下的箱子中y最大的那几个，如果选完了都凑不出那么就是无解，数据很小，随便做都可以过</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Bottle</span> &#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">&#125; box[<span class="number">40</span>];</span><br><span class="line"><span class="type">int</span> n, x, y, bound = <span class="number">1</span>, t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;my.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">if</span> (!(x || y)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; box[i].a &gt;&gt; box[i].b;</span><br><span class="line">    <span class="keyword">if</span> (x) &#123;</span><br><span class="line">        <span class="built_in">sort</span>(box + <span class="number">1</span>, box + <span class="number">1</span> + n, [&amp;](Bottle A, Bottle B) &#123; <span class="keyword">return</span> A.a &gt; B.a || A.a == B.a &amp;&amp; A.b &gt; B.b; &#125;);</span><br><span class="line">        <span class="keyword">if</span> (!box[x].a) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;IMPOSSIBLE&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= x; ++i, ++bound) t += box[i].b;</span><br><span class="line">        <span class="keyword">if</span> (t &gt;= y) &#123;</span><br><span class="line">            cout &lt;&lt; x;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(box + bound, box + <span class="number">1</span> + n, [&amp;](Bottle A, Bottle B) &#123; <span class="keyword">return</span> A.b &gt; B.b; &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = bound; i &lt;= n; ++i) &#123;</span><br><span class="line">            t += box[i].b;</span><br><span class="line">            <span class="keyword">if</span> (t &gt;= y) &#123;</span><br><span class="line">                cout &lt;&lt; i;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;IMPOSSIBLE&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">sort</span>(box + <span class="number">1</span>, box + <span class="number">1</span> + n, [&amp;](Bottle A, Bottle B) &#123; <span class="keyword">return</span> A.b &gt; B.b; &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            t += box[i].b;</span><br><span class="line">            <span class="keyword">if</span> (t &gt;= y) &#123;</span><br><span class="line">                cout &lt;&lt; i;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;IMPOSSIBLE&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比赛的时候还不知道sort还有这种写法，嫌写比较函数太复杂用优先队列和pair瞎搞做对的，有些队伍用搜索剪枝过的，好像背包也可以<br><a name="xSdUp"></a></p>
<h1 id="F-Turn-the-Light"><a href="#F-Turn-the-Light" class="headerlink" title="F.Turn the Light"></a>F.Turn the Light</h1><p><img src="/2023/08/19/20thZJCPC/TurntheLight.png" alt="TurntheLight"><br>翻译：<br>这是一个交互问题。<br>Putata有n个灯，从1到n从左到右编号。最初，所有的灯都是关着的。其中一盏灯是他最喜欢的灯,灯的号码是隐藏的。 Budada想知道Putata最喜欢的灯的编号，他可以做如下查询:<br>“? x”:如果x的灯是关的，打开编号为x的灯，然后问putata，在putata最喜欢的灯的左边打开的灯数的绝对值减去右边打开的灯数。<br>Budada只能进行不超过40次的查询。请帮他找到putata最喜欢的灯。在这个问题中，交互者是自适应的，这意味着答案可能不是固定的，交互者可以任意选择它，并且答案将与你与交互者的交互相一致。<br>已通过此<a target="_blank" rel="noopener" href="https://qoj.ac/contest/1221/problem/6394">oj</a>的评测<br>2023.08.22<br>一眼二分，因为首先这个数据范围符合二分(log2(n)&lt;40)，并且不难看出如果输出和上一次比较没有变化那么那个数就是喜欢的数，但是发现由于输出的是差的绝对值，所以没有单调性，但又发现log2(n)*2是一个接近40的数，所以猜测每次问两次保证单调性：每次都先问左边界的数是不是喜欢的数字，然后再二分问中间的数是不是喜欢的先问左边界就保证了左边的数始终大于右边的数，也就去掉了绝对值使其有了单调性。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, pre, t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (l + <span class="number">1</span> + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span> (t == pre) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;! &quot;</span> &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = t;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; mid &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span> (t == pre) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;! &quot;</span> &lt;&lt; mid &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pre &gt; t) r = mid - <span class="number">1</span>, l++;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">        pre = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验题代码</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> random(a, b) ((a)+rand()%((b)-(a)+1))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, pre, t;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> st[<span class="number">1000006</span>];</span><br><span class="line"><span class="type">int</span> lLight, rLight, cnt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_num</span><span class="params">(<span class="type">char</span> c, <span class="type">int</span> x, <span class="type">int</span> fav)</span> </span>&#123;</span><br><span class="line">    ++cnt;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="string">&#x27;!&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == fav &amp;&amp; cnt &lt;= <span class="number">40</span>)cout &lt;&lt; <span class="string">&quot;Accept&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cnt &gt; <span class="number">40</span>)cout &lt;&lt; <span class="string">&quot;Time Limit Error&quot;</span> &lt;&lt; endl, <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Wrong Answer&quot;</span> &lt;&lt; endl, <span class="built_in">getchar</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt; fav &amp;&amp; !st[x]) &#123;</span><br><span class="line">            ++rLight;</span><br><span class="line">            st[x] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; fav &amp;&amp; !st[x]) &#123;</span><br><span class="line">            ++lLight;</span><br><span class="line">            st[x] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">abs</span>(lLight - rLight) &lt;&lt; endl;</span><br><span class="line">        t = <span class="built_in">abs</span>(lLight - rLight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(st, <span class="literal">false</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">    n = pre = t = lLight = rLight = cnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    n = <span class="built_in">random</span>(<span class="number">1</span>, <span class="number">1000000</span>);</span><br><span class="line">    <span class="type">int</span> num = <span class="built_in">random</span>(<span class="number">1</span>, n);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (l + <span class="number">1</span> + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">get_num</span>(<span class="string">&#x27;?&#x27;</span>, l, num);</span><br><span class="line">        <span class="keyword">if</span> (t == pre) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;! &quot;</span> &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">            <span class="built_in">get_num</span>(<span class="string">&#x27;!&#x27;</span>, l, num);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = t;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;? &quot;</span> &lt;&lt; mid &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">get_num</span>(<span class="string">&#x27;?&#x27;</span>, mid, num);</span><br><span class="line">        <span class="keyword">if</span> (t == pre) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;! &quot;</span> &lt;&lt; mid &lt;&lt; endl;</span><br><span class="line">            <span class="built_in">get_num</span>(<span class="string">&#x27;!&#x27;</span>, mid, num);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pre &gt; t)</span><br><span class="line">            r = mid - <span class="number">1</span>, l++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        pre = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">1024</span>; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;正在运行第&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;个数据&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>跑了很多组对拍发现其实这个算法能够在29次询问以内通过</p>
<p><a name="rEnYB"></a></p>
<h1 id="K-Lazy-but-Diligent"><a href="#K-Lazy-but-Diligent" class="headerlink" title="K. Lazy but Diligent"></a><strong>K. Lazy but Diligent</strong></h1><p><img src="/2023/08/19/20thZJCPC/LazybutDiligent.png" alt="LazybutDiligent"><br>翻译：<br>PigeIand大学拥有n幢编号分别为1-n的建筑物，其中1号楼是学生宿舍，其他是教学楼。所有建筑物通过双向路径连接，其中第i条路是长度为li,链接xi和yi楼，从a时间开始，到b时间结束。小猪需要在t时间后回到宿舍休息，更重要的是，在她的学习时间，小猪可以偷偷溜回去睡觉。小猪很懒，但很聪明，所以她希望 在学习期间至少花 s 个单位的时间在宿舍睡觉。我们认为小猪参加课程i，当且仅当她在从ai到bi的时间里都待在pi楼，这意味着她必须完成整个课程。请输出小猪最多能学习多少门课程，同时满足她的睡眠要求。<br>输入：<br>第一行包含五个整数n，m，g，t，s，表示建筑物的数目、道路的数目、课程的数目，总学习时间，需要睡眠的时间<br>以下m行中的每一行都包含三个整数$x_{i},y_i,l_i$，表示连接x和y的双向路径，长度为l。<br>以下q行中的每一行都包含三个整数$a_i,b_i,p_i$，表示这门课程在p楼从a点开始到b点结束。<br>输出：<br>最多能学习多少门课程</p>
<p>这题的程序对拍目前只验证了树这一特殊图的情况<br>2023.08.21<br>第一次做这种图上的dp。一般没有什么思路感觉像深搜的时候就可以考虑dp了。<br>n个楼，m条路，m的数据保证了图是联通的，q个课程，问在满足条件下最多可以学几门。<br>看范围q&lt;=400,考虑n^3的dp，也就是说状态的维数必须是小于等于3，首先因为要枚举，所以显然有一维一定是i，表示当前枚举到第几个课程，那么可以发现上一步在哪里也会影响到后面的决策，所以再加一维j，表示在哪里，由于要枚举当前和之前在哪里，所以复杂度再加上n^2,总复杂度在n^3左右可以通过。<br>除了第i个课并且此时在j楼时最多能学习的课程的数目要用dp表存储以外，这道题还需要在第i个课并且此时在j楼时最多能休息的时间长度上dp，因为存在中途可以回去睡觉的情况：当这个人前一步在k位置并且要走到j位置时，因为j课程有开始时间的限制，所以如果他走到j还要花时间等待j课程到开始时间，所以不如在k点时先回到1号点休息后再从1号点走到j点，这样就能保证在不耽误课程的情况下能够谁最多的时间（前提是回1号点再走到j点不会大于j课程开始时间）。<br>状态定义：<br>dp[i][j]，表示已经上到i个课并且此时在j楼时最多能学习的课程的数目<br>rest[i][j],表示已经上到i个课并且此时在j楼时最多能休息的时间的长度<br>状态转移：<br>当枚举的前一个有课的教学楼的位置能够到达（只有在这个位置上过课的才有必要停留在这个位置，否则对于结果没有贡献也就没有必要到那个位置），并从这幢楼的课程的结束时间加上从这个位置到当前想去的位置所需要的时间：<br>即当满足：<br><code>dp[i - 1][course[k].p] &amp;&amp; dist[course[k].p][course[j].p] + course[k].b &lt;= course[j].a</code><br>就可以计算从k点时先回到1号点休息后再从1号点走到j点最多可以休息的时间restT：<br><code>restT = max(course[j].a - course[k].b - dist[course[k].p][1] - dist[1][course[j].p], 0)</code><br>然后需要判断两个限制条件：一个是学完课程后能不能在规定的时间内回到1号点，第二个是总的睡眠时间小于需要的睡眠时间，<br>即当满足：<br><code>course[j].b + dist[course[j].p][1] &lt;= t &amp;&amp; (t - course[j].b - dist[course[j].p][1]) + restT + rest[i - 1][k] &gt;= s</code><br>有转移方程：<br><code>dp[i][course[j].p] = max(dp[i][course[j].p], dp[i - 1][course[k].p] + 1)</code><br><code>rest[i][j] = min(s, max(rest[i][j], rest[i - 1][k] + restT))</code><br>同时更新答案：<code>ans = max(ans, dp[i][course[j].p])</code><br>开始之前先floyd跑出任意2栋楼直接最短路，存在dist数组里预处理。也要预处理出到第一个位置可以睡的最长时间和能不能到达那个位置，因为第一个位置比较特殊不用考虑前一个位置</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> <span class="number">4</span> <span class="number">3</span> <span class="number">10</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">5</span> <span class="number">1</span></span><br><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">9</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">9</span> <span class="number">4</span></span><br><span class="line"><span class="number">6</span> <span class="number">8</span> <span class="number">3</span></span><br><span class="line">output：<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5</span> <span class="number">4</span> <span class="number">4</span> <span class="number">15</span> <span class="number">3</span></span><br><span class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">1</span></span><br><span class="line"><span class="number">4</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">5</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="number">5</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">5</span> <span class="number">6</span> <span class="number">4</span></span><br><span class="line"><span class="number">8</span> <span class="number">9</span> <span class="number">3</span></span><br><span class="line"><span class="number">13</span> <span class="number">14</span> <span class="number">2</span></span><br><span class="line"><span class="number">4</span> <span class="number">6</span> <span class="number">5</span></span><br><span class="line">output：<span class="number">2</span></span><br><span class="line"></span><br><span class="line">hack：</span><br><span class="line"></span><br><span class="line"><span class="number">6</span> <span class="number">5</span> <span class="number">1</span> <span class="number">5883</span> <span class="number">1327</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">43</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">8</span></span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">48</span></span><br><span class="line"><span class="number">5</span> <span class="number">2</span> <span class="number">37</span></span><br><span class="line"><span class="number">6</span> <span class="number">2</span> <span class="number">43</span></span><br><span class="line"><span class="number">1398</span> <span class="number">5257</span> <span class="number">2</span></span><br><span class="line">output：<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span> <span class="number">6</span> <span class="number">5</span> <span class="number">3760</span> <span class="number">1835</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">16</span></span><br><span class="line"><span class="number">4</span> <span class="number">2</span> <span class="number">53</span></span><br><span class="line"><span class="number">5</span> <span class="number">2</span> <span class="number">89</span></span><br><span class="line"><span class="number">6</span> <span class="number">2</span> <span class="number">61</span></span><br><span class="line"><span class="number">7</span> <span class="number">6</span> <span class="number">49</span></span><br><span class="line"><span class="number">320</span> <span class="number">1728</span> <span class="number">4</span></span><br><span class="line"><span class="number">437</span> <span class="number">2046</span> <span class="number">2</span></span><br><span class="line"><span class="number">1950</span> <span class="number">2242</span> <span class="number">6</span></span><br><span class="line"><span class="number">3754</span> <span class="number">3758</span> <span class="number">3</span></span><br><span class="line"><span class="number">1689</span> <span class="number">3242</span> <span class="number">5</span></span><br><span class="line">output: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span> <span class="number">5</span> <span class="number">3</span> <span class="number">1967</span> <span class="number">1249</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">40</span></span><br><span class="line"><span class="number">3</span> <span class="number">1</span> <span class="number">72</span></span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">93</span></span><br><span class="line"><span class="number">5</span> <span class="number">1</span> <span class="number">49</span></span><br><span class="line"><span class="number">6</span> <span class="number">3</span> <span class="number">36</span></span><br><span class="line"><span class="number">1651</span> <span class="number">1928</span> <span class="number">5</span></span><br><span class="line"><span class="number">591</span> <span class="number">770</span> <span class="number">6</span></span><br><span class="line"><span class="number">1557</span> <span class="number">1612</span> <span class="number">4</span></span><br><span class="line">output:<span class="number">1</span></span><br><span class="line"></span><br><span class="line">大样例:</span><br><span class="line"><span class="number">155</span> <span class="number">154</span> <span class="number">126</span> <span class="number">3118</span> <span class="number">1830</span> </span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">7</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">10</span></span><br><span class="line"><span class="number">4</span> <span class="number">2</span> <span class="number">7</span></span><br><span class="line"><span class="number">5</span> <span class="number">1</span> <span class="number">66</span></span><br><span class="line"><span class="number">6</span> <span class="number">2</span> <span class="number">89</span></span><br><span class="line"><span class="number">7</span> <span class="number">6</span> <span class="number">42</span></span><br><span class="line"><span class="number">8</span> <span class="number">4</span> <span class="number">81</span></span><br><span class="line"><span class="number">9</span> <span class="number">3</span> <span class="number">59</span></span><br><span class="line"><span class="number">10</span> <span class="number">1</span> <span class="number">28</span></span><br><span class="line"><span class="number">11</span> <span class="number">8</span> <span class="number">33</span></span><br><span class="line"><span class="number">12</span> <span class="number">4</span> <span class="number">38</span></span><br><span class="line"><span class="number">13</span> <span class="number">3</span> <span class="number">70</span></span><br><span class="line"><span class="number">14</span> <span class="number">3</span> <span class="number">93</span></span><br><span class="line"><span class="number">15</span> <span class="number">13</span> <span class="number">71</span></span><br><span class="line"><span class="number">16</span> <span class="number">15</span> <span class="number">28</span></span><br><span class="line"><span class="number">17</span> <span class="number">2</span> <span class="number">87</span></span><br><span class="line"><span class="number">18</span> <span class="number">8</span> <span class="number">41</span></span><br><span class="line"><span class="number">19</span> <span class="number">4</span> <span class="number">67</span></span><br><span class="line"><span class="number">20</span> <span class="number">13</span> <span class="number">12</span></span><br><span class="line"><span class="number">21</span> <span class="number">15</span> <span class="number">27</span></span><br><span class="line"><span class="number">22</span> <span class="number">15</span> <span class="number">59</span></span><br><span class="line"><span class="number">23</span> <span class="number">15</span> <span class="number">72</span></span><br><span class="line"><span class="number">24</span> <span class="number">4</span> <span class="number">6</span></span><br><span class="line"><span class="number">25</span> <span class="number">11</span> <span class="number">59</span></span><br><span class="line"><span class="number">26</span> <span class="number">12</span> <span class="number">12</span></span><br><span class="line"><span class="number">27</span> <span class="number">8</span> <span class="number">57</span></span><br><span class="line"><span class="number">28</span> <span class="number">15</span> <span class="number">50</span></span><br><span class="line"><span class="number">29</span> <span class="number">15</span> <span class="number">51</span></span><br><span class="line"><span class="number">30</span> <span class="number">4</span> <span class="number">18</span></span><br><span class="line"><span class="number">31</span> <span class="number">1</span> <span class="number">82</span></span><br><span class="line"><span class="number">32</span> <span class="number">3</span> <span class="number">66</span></span><br><span class="line"><span class="number">33</span> <span class="number">3</span> <span class="number">35</span></span><br><span class="line"><span class="number">34</span> <span class="number">10</span> <span class="number">28</span></span><br><span class="line"><span class="number">35</span> <span class="number">5</span> <span class="number">89</span></span><br><span class="line"><span class="number">36</span> <span class="number">14</span> <span class="number">70</span></span><br><span class="line"><span class="number">37</span> <span class="number">5</span> <span class="number">22</span></span><br><span class="line"><span class="number">38</span> <span class="number">15</span> <span class="number">93</span></span><br><span class="line"><span class="number">39</span> <span class="number">10</span> <span class="number">52</span></span><br><span class="line"><span class="number">40</span> <span class="number">29</span> <span class="number">8</span></span><br><span class="line"><span class="number">41</span> <span class="number">25</span> <span class="number">10</span></span><br><span class="line"><span class="number">42</span> <span class="number">26</span> <span class="number">103</span></span><br><span class="line"><span class="number">43</span> <span class="number">39</span> <span class="number">36</span></span><br><span class="line"><span class="number">44</span> <span class="number">7</span> <span class="number">65</span></span><br><span class="line"><span class="number">45</span> <span class="number">21</span> <span class="number">71</span></span><br><span class="line"><span class="number">46</span> <span class="number">37</span> <span class="number">91</span></span><br><span class="line"><span class="number">47</span> <span class="number">11</span> <span class="number">67</span></span><br><span class="line"><span class="number">48</span> <span class="number">8</span> <span class="number">52</span></span><br><span class="line"><span class="number">49</span> <span class="number">32</span> <span class="number">91</span></span><br><span class="line"><span class="number">50</span> <span class="number">31</span> <span class="number">46</span></span><br><span class="line"><span class="number">51</span> <span class="number">10</span> <span class="number">83</span></span><br><span class="line"><span class="number">52</span> <span class="number">19</span> <span class="number">58</span></span><br><span class="line"><span class="number">53</span> <span class="number">42</span> <span class="number">77</span></span><br><span class="line"><span class="number">54</span> <span class="number">31</span> <span class="number">85</span></span><br><span class="line"><span class="number">55</span> <span class="number">30</span> <span class="number">31</span></span><br><span class="line"><span class="number">56</span> <span class="number">2</span> <span class="number">37</span></span><br><span class="line"><span class="number">57</span> <span class="number">31</span> <span class="number">104</span></span><br><span class="line"><span class="number">58</span> <span class="number">26</span> <span class="number">20</span></span><br><span class="line"><span class="number">59</span> <span class="number">55</span> <span class="number">14</span></span><br><span class="line"><span class="number">60</span> <span class="number">47</span> <span class="number">73</span></span><br><span class="line"><span class="number">61</span> <span class="number">60</span> <span class="number">27</span></span><br><span class="line"><span class="number">62</span> <span class="number">12</span> <span class="number">43</span></span><br><span class="line"><span class="number">63</span> <span class="number">36</span> <span class="number">36</span></span><br><span class="line"><span class="number">64</span> <span class="number">19</span> <span class="number">95</span></span><br><span class="line"><span class="number">65</span> <span class="number">33</span> <span class="number">71</span></span><br><span class="line"><span class="number">66</span> <span class="number">27</span> <span class="number">3</span></span><br><span class="line"><span class="number">67</span> <span class="number">17</span> <span class="number">99</span></span><br><span class="line"><span class="number">68</span> <span class="number">29</span> <span class="number">4</span></span><br><span class="line"><span class="number">69</span> <span class="number">17</span> <span class="number">32</span></span><br><span class="line"><span class="number">70</span> <span class="number">63</span> <span class="number">64</span></span><br><span class="line"><span class="number">71</span> <span class="number">44</span> <span class="number">51</span></span><br><span class="line"><span class="number">72</span> <span class="number">20</span> <span class="number">25</span></span><br><span class="line"><span class="number">73</span> <span class="number">31</span> <span class="number">47</span></span><br><span class="line"><span class="number">74</span> <span class="number">65</span> <span class="number">23</span></span><br><span class="line"><span class="number">75</span> <span class="number">43</span> <span class="number">29</span></span><br><span class="line"><span class="number">76</span> <span class="number">50</span> <span class="number">5</span></span><br><span class="line"><span class="number">77</span> <span class="number">59</span> <span class="number">63</span></span><br><span class="line"><span class="number">78</span> <span class="number">60</span> <span class="number">17</span></span><br><span class="line"><span class="number">79</span> <span class="number">30</span> <span class="number">86</span></span><br><span class="line"><span class="number">80</span> <span class="number">41</span> <span class="number">32</span></span><br><span class="line"><span class="number">81</span> <span class="number">3</span> <span class="number">15</span></span><br><span class="line"><span class="number">82</span> <span class="number">26</span> <span class="number">72</span></span><br><span class="line"><span class="number">83</span> <span class="number">80</span> <span class="number">2</span></span><br><span class="line"><span class="number">84</span> <span class="number">39</span> <span class="number">49</span></span><br><span class="line"><span class="number">85</span> <span class="number">66</span> <span class="number">40</span></span><br><span class="line"><span class="number">86</span> <span class="number">22</span> <span class="number">26</span></span><br><span class="line"><span class="number">87</span> <span class="number">5</span> <span class="number">7</span></span><br><span class="line"><span class="number">88</span> <span class="number">38</span> <span class="number">91</span></span><br><span class="line"><span class="number">89</span> <span class="number">22</span> <span class="number">96</span></span><br><span class="line"><span class="number">90</span> <span class="number">36</span> <span class="number">4</span></span><br><span class="line"><span class="number">91</span> <span class="number">52</span> <span class="number">52</span></span><br><span class="line"><span class="number">92</span> <span class="number">66</span> <span class="number">99</span></span><br><span class="line"><span class="number">93</span> <span class="number">52</span> <span class="number">54</span></span><br><span class="line"><span class="number">94</span> <span class="number">1</span> <span class="number">73</span></span><br><span class="line"><span class="number">95</span> <span class="number">67</span> <span class="number">1</span></span><br><span class="line"><span class="number">96</span> <span class="number">6</span> <span class="number">21</span></span><br><span class="line"><span class="number">97</span> <span class="number">65</span> <span class="number">23</span></span><br><span class="line"><span class="number">98</span> <span class="number">90</span> <span class="number">91</span></span><br><span class="line"><span class="number">99</span> <span class="number">42</span> <span class="number">32</span></span><br><span class="line"><span class="number">100</span> <span class="number">75</span> <span class="number">55</span></span><br><span class="line"><span class="number">101</span> <span class="number">90</span> <span class="number">47</span></span><br><span class="line"><span class="number">102</span> <span class="number">10</span> <span class="number">1</span></span><br><span class="line"><span class="number">103</span> <span class="number">32</span> <span class="number">77</span></span><br><span class="line"><span class="number">104</span> <span class="number">47</span> <span class="number">86</span></span><br><span class="line"><span class="number">105</span> <span class="number">5</span> <span class="number">76</span></span><br><span class="line"><span class="number">106</span> <span class="number">83</span> <span class="number">50</span></span><br><span class="line"><span class="number">107</span> <span class="number">90</span> <span class="number">3</span></span><br><span class="line"><span class="number">108</span> <span class="number">52</span> <span class="number">88</span></span><br><span class="line"><span class="number">109</span> <span class="number">10</span> <span class="number">72</span></span><br><span class="line"><span class="number">110</span> <span class="number">40</span> <span class="number">96</span></span><br><span class="line"><span class="number">111</span> <span class="number">71</span> <span class="number">71</span></span><br><span class="line"><span class="number">112</span> <span class="number">45</span> <span class="number">10</span></span><br><span class="line"><span class="number">113</span> <span class="number">21</span> <span class="number">85</span></span><br><span class="line"><span class="number">114</span> <span class="number">21</span> <span class="number">56</span></span><br><span class="line"><span class="number">115</span> <span class="number">15</span> <span class="number">80</span></span><br><span class="line"><span class="number">116</span> <span class="number">40</span> <span class="number">59</span></span><br><span class="line"><span class="number">117</span> <span class="number">34</span> <span class="number">78</span></span><br><span class="line"><span class="number">118</span> <span class="number">60</span> <span class="number">66</span></span><br><span class="line"><span class="number">119</span> <span class="number">114</span> <span class="number">47</span></span><br><span class="line"><span class="number">120</span> <span class="number">64</span> <span class="number">24</span></span><br><span class="line"><span class="number">121</span> <span class="number">72</span> <span class="number">19</span></span><br><span class="line"><span class="number">122</span> <span class="number">101</span> <span class="number">68</span></span><br><span class="line"><span class="number">123</span> <span class="number">46</span> <span class="number">27</span></span><br><span class="line"><span class="number">124</span> <span class="number">55</span> <span class="number">17</span></span><br><span class="line"><span class="number">125</span> <span class="number">22</span> <span class="number">13</span></span><br><span class="line"><span class="number">126</span> <span class="number">8</span> <span class="number">12</span></span><br><span class="line"><span class="number">127</span> <span class="number">49</span> <span class="number">96</span></span><br><span class="line"><span class="number">128</span> <span class="number">70</span> <span class="number">28</span></span><br><span class="line"><span class="number">129</span> <span class="number">58</span> <span class="number">35</span></span><br><span class="line"><span class="number">130</span> <span class="number">108</span> <span class="number">21</span></span><br><span class="line"><span class="number">131</span> <span class="number">58</span> <span class="number">65</span></span><br><span class="line"><span class="number">132</span> <span class="number">40</span> <span class="number">9</span></span><br><span class="line"><span class="number">133</span> <span class="number">100</span> <span class="number">37</span></span><br><span class="line"><span class="number">134</span> <span class="number">65</span> <span class="number">73</span></span><br><span class="line"><span class="number">135</span> <span class="number">74</span> <span class="number">76</span></span><br><span class="line"><span class="number">136</span> <span class="number">17</span> <span class="number">54</span></span><br><span class="line"><span class="number">137</span> <span class="number">42</span> <span class="number">63</span></span><br><span class="line"><span class="number">138</span> <span class="number">21</span> <span class="number">32</span></span><br><span class="line"><span class="number">139</span> <span class="number">44</span> <span class="number">102</span></span><br><span class="line"><span class="number">140</span> <span class="number">45</span> <span class="number">91</span></span><br><span class="line"><span class="number">141</span> <span class="number">17</span> <span class="number">40</span></span><br><span class="line"><span class="number">142</span> <span class="number">120</span> <span class="number">56</span></span><br><span class="line"><span class="number">143</span> <span class="number">74</span> <span class="number">78</span></span><br><span class="line"><span class="number">144</span> <span class="number">31</span> <span class="number">1</span></span><br><span class="line"><span class="number">145</span> <span class="number">12</span> <span class="number">75</span></span><br><span class="line"><span class="number">146</span> <span class="number">47</span> <span class="number">46</span></span><br><span class="line"><span class="number">147</span> <span class="number">26</span> <span class="number">86</span></span><br><span class="line"><span class="number">148</span> <span class="number">30</span> <span class="number">14</span></span><br><span class="line"><span class="number">149</span> <span class="number">115</span> <span class="number">69</span></span><br><span class="line"><span class="number">150</span> <span class="number">32</span> <span class="number">12</span></span><br><span class="line"><span class="number">151</span> <span class="number">57</span> <span class="number">87</span></span><br><span class="line"><span class="number">152</span> <span class="number">106</span> <span class="number">20</span></span><br><span class="line"><span class="number">153</span> <span class="number">110</span> <span class="number">57</span></span><br><span class="line"><span class="number">154</span> <span class="number">139</span> <span class="number">3</span></span><br><span class="line"><span class="number">155</span> <span class="number">121</span> <span class="number">60</span></span><br><span class="line"><span class="number">1889</span> <span class="number">2840</span> <span class="number">127</span></span><br><span class="line"><span class="number">2328</span> <span class="number">2789</span> <span class="number">9</span></span><br><span class="line"><span class="number">1254</span> <span class="number">1456</span> <span class="number">52</span></span><br><span class="line"><span class="number">2231</span> <span class="number">3048</span> <span class="number">25</span></span><br><span class="line"><span class="number">1937</span> <span class="number">2019</span> <span class="number">96</span></span><br><span class="line"><span class="number">71</span> <span class="number">117</span> <span class="number">91</span></span><br><span class="line"><span class="number">556</span> <span class="number">1318</span> <span class="number">79</span></span><br><span class="line"><span class="number">2029</span> <span class="number">2616</span> <span class="number">33</span></span><br><span class="line"><span class="number">363</span> <span class="number">1158</span> <span class="number">29</span></span><br><span class="line"><span class="number">60</span> <span class="number">1979</span> <span class="number">40</span></span><br><span class="line"><span class="number">2938</span> <span class="number">2971</span> <span class="number">95</span></span><br><span class="line"><span class="number">1506</span> <span class="number">2530</span> <span class="number">15</span></span><br><span class="line"><span class="number">484</span> <span class="number">1232</span> <span class="number">13</span></span><br><span class="line"><span class="number">2142</span> <span class="number">2273</span> <span class="number">94</span></span><br><span class="line"><span class="number">2418</span> <span class="number">3085</span> <span class="number">26</span></span><br><span class="line"><span class="number">1456</span> <span class="number">2049</span> <span class="number">69</span></span><br><span class="line"><span class="number">409</span> <span class="number">2793</span> <span class="number">81</span></span><br><span class="line"><span class="number">2506</span> <span class="number">2876</span> <span class="number">122</span></span><br><span class="line"><span class="number">1694</span> <span class="number">2651</span> <span class="number">43</span></span><br><span class="line"><span class="number">2734</span> <span class="number">3020</span> <span class="number">87</span></span><br><span class="line"><span class="number">665</span> <span class="number">1578</span> <span class="number">134</span></span><br><span class="line"><span class="number">1107</span> <span class="number">1681</span> <span class="number">145</span></span><br><span class="line"><span class="number">2654</span> <span class="number">3059</span> <span class="number">73</span></span><br><span class="line"><span class="number">387</span> <span class="number">1226</span> <span class="number">143</span></span><br><span class="line"><span class="number">1957</span> <span class="number">2556</span> <span class="number">133</span></span><br><span class="line"><span class="number">1355</span> <span class="number">1893</span> <span class="number">93</span></span><br><span class="line"><span class="number">995</span> <span class="number">1661</span> <span class="number">152</span></span><br><span class="line"><span class="number">1011</span> <span class="number">2205</span> <span class="number">51</span></span><br><span class="line"><span class="number">1251</span> <span class="number">2780</span> <span class="number">58</span></span><br><span class="line"><span class="number">2251</span> <span class="number">2374</span> <span class="number">121</span></span><br><span class="line"><span class="number">1824</span> <span class="number">1847</span> <span class="number">54</span></span><br><span class="line"><span class="number">504</span> <span class="number">1866</span> <span class="number">42</span></span><br><span class="line"><span class="number">738</span> <span class="number">2361</span> <span class="number">154</span></span><br><span class="line"><span class="number">1233</span> <span class="number">1627</span> <span class="number">78</span></span><br><span class="line"><span class="number">1330</span> <span class="number">2763</span> <span class="number">68</span></span><br><span class="line"><span class="number">1994</span> <span class="number">2048</span> <span class="number">18</span></span><br><span class="line"><span class="number">1636</span> <span class="number">2392</span> <span class="number">66</span></span><br><span class="line"><span class="number">17</span> <span class="number">2079</span> <span class="number">155</span></span><br><span class="line"><span class="number">1324</span> <span class="number">2415</span> <span class="number">45</span></span><br><span class="line"><span class="number">675</span> <span class="number">1181</span> <span class="number">129</span></span><br><span class="line"><span class="number">1536</span> <span class="number">2185</span> <span class="number">108</span></span><br><span class="line"><span class="number">1332</span> <span class="number">1752</span> <span class="number">57</span></span><br><span class="line"><span class="number">1307</span> <span class="number">2932</span> <span class="number">85</span></span><br><span class="line"><span class="number">1078</span> <span class="number">1130</span> <span class="number">99</span></span><br><span class="line"><span class="number">902</span> <span class="number">982</span> <span class="number">24</span></span><br><span class="line"><span class="number">1791</span> <span class="number">2453</span> <span class="number">21</span></span><br><span class="line"><span class="number">1528</span> <span class="number">2256</span> <span class="number">148</span></span><br><span class="line"><span class="number">3032</span> <span class="number">3047</span> <span class="number">114</span></span><br><span class="line"><span class="number">1493</span> <span class="number">3016</span> <span class="number">103</span></span><br><span class="line"><span class="number">1298</span> <span class="number">2529</span> <span class="number">104</span></span><br><span class="line"><span class="number">434</span> <span class="number">2578</span> <span class="number">63</span></span><br><span class="line"><span class="number">1682</span> <span class="number">2611</span> <span class="number">36</span></span><br><span class="line"><span class="number">1722</span> <span class="number">3056</span> <span class="number">5</span></span><br><span class="line"><span class="number">350</span> <span class="number">2091</span> <span class="number">20</span></span><br><span class="line"><span class="number">1822</span> <span class="number">2810</span> <span class="number">62</span></span><br><span class="line"><span class="number">1196</span> <span class="number">1885</span> <span class="number">38</span></span><br><span class="line"><span class="number">486</span> <span class="number">1738</span> <span class="number">105</span></span><br><span class="line"><span class="number">722</span> <span class="number">1375</span> <span class="number">17</span></span><br><span class="line"><span class="number">495</span> <span class="number">1559</span> <span class="number">120</span></span><br><span class="line"><span class="number">262</span> <span class="number">837</span> <span class="number">37</span></span><br><span class="line"><span class="number">404</span> <span class="number">2209</span> <span class="number">124</span></span><br><span class="line"><span class="number">1621</span> <span class="number">2570</span> <span class="number">89</span></span><br><span class="line"><span class="number">1966</span> <span class="number">2783</span> <span class="number">65</span></span><br><span class="line"><span class="number">2970</span> <span class="number">3024</span> <span class="number">50</span></span><br><span class="line"><span class="number">2020</span> <span class="number">3033</span> <span class="number">136</span></span><br><span class="line"><span class="number">1410</span> <span class="number">1559</span> <span class="number">83</span></span><br><span class="line"><span class="number">504</span> <span class="number">1481</span> <span class="number">90</span></span><br><span class="line"><span class="number">288</span> <span class="number">1350</span> <span class="number">97</span></span><br><span class="line"><span class="number">755</span> <span class="number">1289</span> <span class="number">117</span></span><br><span class="line"><span class="number">1232</span> <span class="number">1552</span> <span class="number">80</span></span><br><span class="line"><span class="number">2967</span> <span class="number">3025</span> <span class="number">70</span></span><br><span class="line"><span class="number">1695</span> <span class="number">2304</span> <span class="number">106</span></span><br><span class="line"><span class="number">2874</span> <span class="number">2900</span> <span class="number">109</span></span><br><span class="line"><span class="number">1257</span> <span class="number">3109</span> <span class="number">56</span></span><br><span class="line"><span class="number">1900</span> <span class="number">2510</span> <span class="number">101</span></span><br><span class="line"><span class="number">2535</span> <span class="number">2961</span> <span class="number">32</span></span><br><span class="line"><span class="number">2636</span> <span class="number">2975</span> <span class="number">48</span></span><br><span class="line"><span class="number">2951</span> <span class="number">2962</span> <span class="number">14</span></span><br><span class="line"><span class="number">2964</span> <span class="number">2994</span> <span class="number">130</span></span><br><span class="line"><span class="number">1325</span> <span class="number">1407</span> <span class="number">35</span></span><br><span class="line"><span class="number">60</span> <span class="number">523</span> <span class="number">88</span></span><br><span class="line"><span class="number">1701</span> <span class="number">2273</span> <span class="number">12</span></span><br><span class="line"><span class="number">710</span> <span class="number">2279</span> <span class="number">31</span></span><br><span class="line"><span class="number">557</span> <span class="number">668</span> <span class="number">76</span></span><br><span class="line"><span class="number">2459</span> <span class="number">2546</span> <span class="number">111</span></span><br><span class="line"><span class="number">2925</span> <span class="number">3092</span> <span class="number">119</span></span><br><span class="line"><span class="number">700</span> <span class="number">2041</span> <span class="number">128</span></span><br><span class="line"><span class="number">2117</span> <span class="number">2311</span> <span class="number">125</span></span><br><span class="line"><span class="number">2152</span> <span class="number">2252</span> <span class="number">126</span></span><br><span class="line"><span class="number">1646</span> <span class="number">2038</span> <span class="number">8</span></span><br><span class="line"><span class="number">1867</span> <span class="number">3039</span> <span class="number">102</span></span><br><span class="line"><span class="number">2341</span> <span class="number">2360</span> <span class="number">34</span></span><br><span class="line"><span class="number">906</span> <span class="number">1225</span> <span class="number">86</span></span><br><span class="line"><span class="number">1270</span> <span class="number">1906</span> <span class="number">150</span></span><br><span class="line"><span class="number">267</span> <span class="number">2672</span> <span class="number">39</span></span><br><span class="line"><span class="number">1684</span> <span class="number">1807</span> <span class="number">55</span></span><br><span class="line"><span class="number">1622</span> <span class="number">1746</span> <span class="number">149</span></span><br><span class="line"><span class="number">170</span> <span class="number">1839</span> <span class="number">142</span></span><br><span class="line"><span class="number">1234</span> <span class="number">2035</span> <span class="number">132</span></span><br><span class="line"><span class="number">3045</span> <span class="number">3065</span> <span class="number">151</span></span><br><span class="line"><span class="number">1832</span> <span class="number">2659</span> <span class="number">2</span></span><br><span class="line"><span class="number">2800</span> <span class="number">3045</span> <span class="number">110</span></span><br><span class="line"><span class="number">56</span> <span class="number">1396</span> <span class="number">135</span></span><br><span class="line"><span class="number">2119</span> <span class="number">3050</span> <span class="number">140</span></span><br><span class="line"><span class="number">218</span> <span class="number">299</span> <span class="number">118</span></span><br><span class="line"><span class="number">1911</span> <span class="number">2022</span> <span class="number">41</span></span><br><span class="line"><span class="number">1737</span> <span class="number">2205</span> <span class="number">137</span></span><br><span class="line"><span class="number">2694</span> <span class="number">2728</span> <span class="number">27</span></span><br><span class="line"><span class="number">1661</span> <span class="number">2797</span> <span class="number">72</span></span><br><span class="line"><span class="number">1662</span> <span class="number">2828</span> <span class="number">131</span></span><br><span class="line"><span class="number">49</span> <span class="number">390</span> <span class="number">146</span></span><br><span class="line"><span class="number">2206</span> <span class="number">2350</span> <span class="number">3</span></span><br><span class="line"><span class="number">293</span> <span class="number">331</span> <span class="number">10</span></span><br><span class="line"><span class="number">1784</span> <span class="number">2204</span> <span class="number">47</span></span><br><span class="line"><span class="number">43</span> <span class="number">192</span> <span class="number">74</span></span><br><span class="line"><span class="number">596</span> <span class="number">769</span> <span class="number">46</span></span><br><span class="line"><span class="number">2109</span> <span class="number">2766</span> <span class="number">144</span></span><br><span class="line"><span class="number">2992</span> <span class="number">3050</span> <span class="number">22</span></span><br><span class="line"><span class="number">2381</span> <span class="number">3024</span> <span class="number">123</span></span><br><span class="line"><span class="number">2156</span> <span class="number">2873</span> <span class="number">107</span></span><br><span class="line"><span class="number">67</span> <span class="number">1236</span> <span class="number">67</span></span><br><span class="line"><span class="number">717</span> <span class="number">726</span> <span class="number">98</span></span><br><span class="line"><span class="number">2357</span> <span class="number">2483</span> <span class="number">4</span></span><br><span class="line"><span class="number">211</span> <span class="number">686</span> <span class="number">100</span></span><br><span class="line"><span class="number">1506</span> <span class="number">2983</span> <span class="number">116</span></span><br><span class="line"><span class="number">1196</span> <span class="number">1301</span> <span class="number">77</span></span><br><span class="line">output:<span class="number">6</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 405</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dist[N][N], dp[N][N], n, m, q, t, s, ans;</span><br><span class="line"><span class="type">int</span> rest[N][N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> a, b, p;</span><br><span class="line">&#125; course[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">floyd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n; ++k)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">                dist[i][j] = <span class="built_in">min</span>(dist[i][j], dist[i][k] + dist[k][j]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;my.txt&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q &gt;&gt; t &gt;&gt; s;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">        dist[a][b] = dist[b][a] = <span class="built_in">min</span>(dist[a][b], c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">floyd</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">        course[i].a = a, course[i].b = b, course[i].p = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dist[<span class="number">1</span>][course[i].p] &lt;= course[i].a) &#123;</span><br><span class="line">            rest[<span class="number">1</span>][i] = <span class="built_in">min</span>(course[i].a - dist[<span class="number">1</span>][course[i].p], s);</span><br><span class="line">            <span class="keyword">if</span> (t - (dist[course[i].p][<span class="number">1</span>] + course[i].b) + rest[<span class="number">1</span>][i] &gt;= s) &#123;</span><br><span class="line">                ++dp[<span class="number">1</span>][course[i].p];</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, dp[<span class="number">1</span>][course[i].p]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= q; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= q; ++j)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= q; ++k)</span><br><span class="line">                <span class="keyword">if</span> (dp[i - <span class="number">1</span>][course[k].p] &amp;&amp; dist[course[k].p][course[j].p] + course[k].b &lt;= course[j].a) &#123;</span><br><span class="line">                    <span class="type">int</span> restT = <span class="built_in">max</span>(course[j].a - course[k].b - dist[course[k].p][<span class="number">1</span>] - dist[<span class="number">1</span>][course[j].p], <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">if</span> (course[j].b + dist[course[j].p][<span class="number">1</span>] &lt;= t &amp;&amp; (t - course[j].b - dist[course[j].p][<span class="number">1</span>]) + restT + rest[i - <span class="number">1</span>][k] &gt;= s) &#123;</span><br><span class="line">                        dp[i][course[j].p] = <span class="built_in">max</span>(dp[i][course[j].p], dp[i - <span class="number">1</span>][course[k].p] + <span class="number">1</span>);</span><br><span class="line">                        rest[i][j] = <span class="built_in">min</span>(s, <span class="built_in">max</span>(rest[i][j], rest[i - <span class="number">1</span>][k] + restT));</span><br><span class="line">                        ans = <span class="built_in">max</span>(ans, dp[i][course[j].p]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对拍代码，生成的不是一张图而是一棵树，没有判断过不是树的情况</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> random(a, b) ((a)+rand()%((b)-(a)+1))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dsu[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> mapp[<span class="number">10000005</span>];</span><br><span class="line"><span class="type">bool</span> st[<span class="number">1000005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">&quot;input.txt&quot;</span>,ios::trunc)</span></span>;</span><br><span class="line">    <span class="comment">//ofstream fout(&quot;input.txt&quot;,ios::app);</span></span><br><span class="line">    <span class="comment">//fout.seekp( 0, ios::end);</span></span><br><span class="line">    <span class="type">int</span> q = <span class="built_in">random</span>(<span class="number">1</span>,n<span class="number">-1</span>),t = <span class="built_in">random</span>(<span class="number">3</span>,<span class="number">10004</span>);</span><br><span class="line">    <span class="type">int</span> s = <span class="built_in">random</span>(<span class="number">0</span>,t);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">2</span>; --i) &#123;</span><br><span class="line">        dsu[i] = <span class="built_in">random</span>(<span class="number">1</span>, i - <span class="number">1</span>);<span class="comment">//生成一颗以1为根节点的树</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) mapp[i] = i;</span><br><span class="line">    <span class="comment">//打印树，必要可以随机边权</span></span><br><span class="line">    cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt; n<span class="number">-1</span>&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;q&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;t&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;s&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;endl;</span><br><span class="line">    fout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt; n<span class="number">-1</span>&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;q&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;t&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;s&lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> temp = <span class="built_in">random</span>(<span class="number">1</span>,<span class="number">104</span>);</span><br><span class="line">        cout &lt;&lt; mapp[i] &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; mapp[dsu[i]] &lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;temp &lt;&lt;endl;</span><br><span class="line">        fout &lt;&lt; mapp[i] &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; mapp[dsu[i]] &lt;&lt; <span class="string">&#x27; &#x27;</span>&lt;&lt;temp&lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="built_in">random</span>(<span class="number">2</span>,n);</span><br><span class="line">        <span class="keyword">while</span>(st[p])p = <span class="built_in">random</span>(<span class="number">2</span>,n);</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">random</span>(<span class="number">1</span>,t<span class="number">-2</span>);</span><br><span class="line">        <span class="type">int</span> b = <span class="built_in">random</span>(a+<span class="number">1</span>,t<span class="number">-1</span>);</span><br><span class="line">        cout&lt;&lt;a&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;b&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;p&lt;&lt;endl;</span><br><span class="line">        fout&lt;&lt;a&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;b&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;p&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    fout.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">create_dataset</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="built_in">random</span>(<span class="number">2</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (t--) <span class="built_in">build</span>(n);</span><br><span class="line">    <span class="comment">//::getchar();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">create_dataset</span>();</span><br><span class="line">    <span class="comment">//system(&quot;standDP.exe &lt; input.txt &gt; stand.txt&quot;);</span></span><br><span class="line">    <span class="comment">//system(&quot;myDP.exe &lt; input.txt &gt; my.txt&quot;);</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;stand.exe &lt; input.txt&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;my.exe &lt; input.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">system</span>(<span class="string">&quot;fc stand.txt my.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> tot)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= tot; i ++ ) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;正在运行第&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;个数据&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">work</span>())&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;出错了\n&quot;</span>;</span><br><span class="line">            <span class="built_in">getchar</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line">    <span class="comment">//work(); </span></span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">512</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Done&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这道题算不上太难，但因为实现细节有很多，算上Floyd一共做了3次dp，补题的时候包括写对拍程序一共做了两个晚上，每次对拍都会出现不少没有考虑到的情况，第一次的时候没有考虑到存在中途回去睡觉可以是最优解的情况，之后的几次都是在代码的细节上出错，比如<code>dp[i][course[j].p]</code>写成<code>dp[i][j]</code>等，而且是在有clion的静态代码分析的情况下写了这么久，比赛时devc++没有分析和代码补全功能，所以在那种环境下更有可能没处理好拿好几次罚时。<br><a name="zkicg"></a></p>
<h1 id="G-Puzzle-Kusabi"><a href="#G-Puzzle-Kusabi" class="headerlink" title="G. Puzzle: Kusabi"></a>G. Puzzle: Kusabi</h1><p><img src="/2023/08/19/20thZJCPC/PuzzleKusabi1.png" alt="PuzzleKusabi1"><br><img src="/2023/08/19/20thZJCPC/PuzzleKusabi.png" alt="PuzzleKusabi"><br></p>
<p><img src="/2023/08/19/20thZJCPC/PuzzleKusabi2.png" alt="PuzzleKusabi2"></p>
<p>Grammy是个拼图高手。今天，她正在玩“Kusabi”拼图的变体。在这个变体中，有一棵有根的树，上面有一些汉字。树的根是顶点1，没有标记。有标记的顶点可以有“长”、“短”或“同”的符号。其目标是将所有标记的顶点连接成对，以便:<br>每个标记顶点通过标记它们之间的最短路径上的每条边连接到另一个标记顶点<br>字符“长”的顶点与根之间的距离必须比对应点到根的距离长。<br>字符“短”的顶点与根之间的距离必须比对应点到根的距离短。<br>字符“同”的顶点与根之间的距离必须与对应点到根的距离相同。<br>树上的每一条边最多只能标记一次。<br>左图展示了一个只有条件的可行谜题，右图展示了一个可行的解题方法。<br>Grammy当然知道如何解决这个难题，但她决定给你一个小测验。请解开这个谜题。<br>输入：<br>第一行包含一个整数n(1<n<10^5)，表示树上的顶点数。<br>接下来的n-1行中的每一行都包含两个整数i，$p_i$和字符串$t_i(t_i\in \left \{ chang,duan,tong,- \right \} )$表示在$p_i$和i之间有一条边，以及顶点的类型I是$t_i$”_”表示未标记顶点i)。保证i是按递增顺序给出的。还保证至少有一个标记的顶点。<br>输出：<br>如果解决方案不存在，则在单行上输出“NO”<br>否则，在第一行输出“YES”，然后输出几行，每行包含两个整数Ui，Vi，表示解决方案中的一对连接顶点。如果有多个解，输出任意一个。<br>已通过此<a target="_blank" rel="noopener" href="https://qoj.ac/contest/1221/problem/6396">oj</a>的评测<br>2023.08.22</n<10^5)，表示树上的顶点数。<br></p>
<p>贪心题：<br>1.显然总的标记为Tong的数量必须为偶数，Chang和Duan数量一定相同<br>2.标记为Tong的一定和相同深度的配对，标记为Chang的深度为第i深的一定和深度为第i深的标记为Duan的配对，如果配不上则需要考虑第3条贪心策略是不是无解，证明：<br>$S_{Duan} = \left \{…i…j…  \right \} ,S_{Chang} = \left \{…i…j…  \right \} $<br>假设没有按照这个规则配对，则必有“Duan”的i和“Chang”的j配对（i小于j）,可以发现“Duan”的j号点所对应的“Chang”被占，“Duan”的j号点又不一定可以与小于j的“Chang”的点配对，也就是说选择变少了，如果“Duan”的j号位的深度大于“Chang”的点中的j-1号位，那么就无法配对，最优性不如原先的假设，所以按照之前的排法是最优的。<br>3.对于一棵子树，最多只能留出一个点无法与子树内的其他点配对，去和别的子树上的点去配对，否则无解，这个也是显然的，因为要去到别的子树的最短路，有一条边是必须要经过的：子树的根节点到这颗子树的父亲节点的这条边，因为每条边只能经过一次，所以最多只能保留一个结点；还有一种可能无解是考虑当前子树的剩下那个点不是给“Tong”节点并且“Tong”的个数是奇数，那么一定无解<br>4.保留的一个结点的选择：<br>对于“Chang”和“Duan”这种节点有剩的：“Chang”结点剩最长的，因为这样可以选择的“Duan”结点就会最多，“Duan”也是同理，应该剩最短的<br>对于“Tong”这种结点有剩的：保留的结点只要选择不能配对的就可以，对深度没有要求，因为不管怎样都一定要和深度一样的配对，实现方法很简单，对所有没有配对的“Tong”结点小到大排序，排完之后两两配对，如果剩下最后一个配不上或者两两配对时深度不一样就将这个点存为剩下的点，注意无解的情况：考虑这棵树最后是不是还保留了一个“Tong”结点，如果是，那么也是无解的<br><img src="/2023/08/19/20thZJCPC/PuzzleKusabi3.png" alt="PuzzleKusabi3" style="zoom:27%;"><img src="/2023/08/19/20thZJCPC/PuzzleKusabi4.png" alt="PuzzleKusabi4" style="zoom:25%;">红点表示“Tong”蓝点表示不是“Tong”的标记点，第一张图表明第一种无解情况，第二张表明第二种无解情况，注意并不需要特地判断当前子树是不是存在两个及以上的无法配对的情况，证明需要根据奇偶性分四类讨论：<br>1.假设当前子树剩的是偶数个未配对的“Tong”结点，并且根节点的父节点除当前子树以外所包含的“Tong”结点个数是奇数，那么总共加起来一定是奇数，一定会留下一个交给其他子树配对，参考第二张图去掉左上那个节点的情况；<br>2.假设当前子树剩的是偶数个未配对的“Tong”结点，并且根节点的父节点除当前子树以外所包含的“Tong”结点个数是偶数，那么因为当前子树会尝试和其他不是该子树上的“Tong”节点配对，不管怎么配对于根节点的父节点来说都是配不完的，一定会留下一个交给其他子树配对；<br>3.假设当前子树剩的是奇数个未配对的“Tong”结点，并且根节点的父节点除当前子树以外所包含的“Tong”结点个数是奇数，那么如果配的上就可以配成合法情况（剩0个），如果配不上也会剩下偶数个，也就变成了第一第二种情况<br>4.假设当前子树剩的是奇数个未配对的“Tong”结点，并且根节点的父节点除当前子树以外所包含的“Tong”结点个数是偶数，同第一种情况，那么总共加起来一定是奇数，一定会留下一个交给其他子树配对；<br>所以观察无解的情况都是会剩下一个和其他子树上的节点配对，所以可以有由叶子结点归纳，一步一步扩大子树的大小直到变成一整棵树都是这样的情况，由于到一整棵树还是会剩一个，这种情况就是第二个无解情况，所以不需要考虑<br>5.这种贪心决策的路径一定不会重叠，证明用类似树形dp的思想，可以从最原始的情况一步步归纳：<br>最底层：当前只有叶子结点时，显然不用考虑，<br>往上一层：将所有同一个父结点的叶子结点连接与父结点组成子树，那么就算是前面讨论的有剩余的未配对结点，那也是最多选出一个通过父结点和其他子树相连，也就相当于是父结点存在一个标记为“Chang”“Duan”“Tong”中的任意一个，他的儿子结点因为已经配对完就不用考虑，所以不会重叠<br>归纳：对父结点和它对应的祖先组成子树，这个子树显然也可以看成第二层的情况，也不会出现重叠<br>所以整个情况合起来路径不会重叠,因此这种贪心策略是正确的<br>代码的实现：<br><code>d[u]</code>数组：存储当前结点对应的深度<br><code>ver[u]</code>数组：存储当前结点对应的种类，0表示不是特殊点，1-3表示“Duan”“Chang”“Tong”，三种状态<br><code>remain[u]</code>数组：存储当前结点的儿子们有无剩余的未配对的结点，数值同ver数组<br><code>num[u][i]</code>数组：存储当前u结点下包括自身的所有状态为i的结点个数<br><code>edge[N]</code>数组：邻接表存图<br><code>v[i]</code>vector数组：存储当前子树所有没有配对的结点，并可由size()统计个数<br><code>flag</code>变量：表示当前是否有无解的状态</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000005</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="type">int</span> d[N], ver[N], remain[N], num[N][<span class="number">4</span>], n;</span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="type">char</span> s[<span class="number">10</span>];</span><br><span class="line">vector&lt;PII&gt; ans;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; edge[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> par)</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v[<span class="number">4</span>];</span><br><span class="line">    d[u] = d[par] + <span class="number">1</span>;<span class="comment">//计算深度</span></span><br><span class="line">    ++num[u][ver[u]];<span class="comment">//计算当前u结点的转态</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; ++i) <span class="keyword">if</span> (ver[u] == i)v[i].<span class="built_in">push_back</span>(u);<span class="comment">//计算当前结点属于哪个状态</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;ne: edge[u]) &#123;<span class="comment">//递归儿子结点</span></span><br><span class="line">        <span class="keyword">if</span> (ne == par) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(ne, u);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; ++i)</span><br><span class="line">            <span class="keyword">if</span> (ver[remain[ne]] == i) v[i].<span class="built_in">push_back</span>(remain[ne]);<span class="comment">//存储儿子结点的状态</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; ++i) num[u][i] += num[ne][i];<span class="comment">//存储所有i状态的数量</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;<span class="comment">//判断有无解，无解就不用再继续运行</span></span><br><span class="line">    <span class="comment">//特判两种无解情况</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">abs</span>(num[u][<span class="number">1</span>] - num[u][<span class="number">2</span>]) &gt;= <span class="number">2</span>) &#123;<span class="comment">//如果当前“Chang”和“Duan”个数相差大于1就说明无解</span></span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (num[u][<span class="number">1</span>] != num[u][<span class="number">2</span>] &amp;&amp; (num[u][<span class="number">3</span>] &amp; <span class="number">1</span>)) &#123;<span class="comment">//如果当前子树的剩下那个点不是给“Tong”节点并且“Tong”的个数是奇数，那么一定无解</span></span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//排序</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; ++i)</span><br><span class="line">        <span class="built_in">sort</span>(v[i].<span class="built_in">begin</span>(), v[i].<span class="built_in">end</span>(), [&amp;](<span class="type">const</span> <span class="type">int</span> u, <span class="type">const</span> <span class="type">int</span> v) &#123; <span class="keyword">return</span> d[u] &lt; d[v]; &#125;);</span><br><span class="line">    <span class="type">int</span> v1 = (<span class="type">int</span>) v[<span class="number">1</span>].<span class="built_in">size</span>(), v2 = (<span class="type">int</span>) v[<span class="number">2</span>].<span class="built_in">size</span>(), v3 = (<span class="type">int</span>) v[<span class="number">3</span>].<span class="built_in">size</span>();</span><br><span class="line">    <span class="comment">//分类遍历</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v3; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == v3 - <span class="number">1</span>) &#123;</span><br><span class="line">            remain[u] = v[<span class="number">3</span>][i];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (d[v[<span class="number">3</span>][i]] != d[v[<span class="number">3</span>][i + <span class="number">1</span>]]) remain[u] = v[<span class="number">3</span>][i++];</span><br><span class="line">        ans.<span class="built_in">emplace_back</span>(v[<span class="number">3</span>][i], v[<span class="number">3</span>][i + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (num[u][<span class="number">1</span>] &gt; num[u][<span class="number">2</span>]) &#123;</span><br><span class="line">        <span class="type">int</span> l = v1 - <span class="number">1</span>, r = v2 - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &gt;= <span class="number">0</span> || r &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l &gt;= <span class="number">0</span> &amp;&amp; r &gt;= <span class="number">0</span> &amp;&amp; d[v[<span class="number">1</span>][l]] &lt; d[v[<span class="number">2</span>][r]]) &#123;</span><br><span class="line">                ans.<span class="built_in">emplace_back</span>(v[<span class="number">1</span>][l--], v[<span class="number">2</span>][r--]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!remain[u] &amp;&amp; l &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                remain[u] = v[<span class="number">1</span>][l--];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; v1 || r &lt; v2) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l &lt; v1 &amp;&amp; r &lt; v2 &amp;&amp; d[v[<span class="number">1</span>][l]] &lt; d[v[<span class="number">2</span>][r]]) &#123;</span><br><span class="line">                ans.<span class="built_in">emplace_back</span>(v[<span class="number">1</span>][l++], v[<span class="number">2</span>][r++]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!remain[u] &amp;&amp; r &lt; v2) &#123;</span><br><span class="line">                remain[u] = v[<span class="number">2</span>][r++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; s;</span><br><span class="line">        edge[u].<span class="built_in">push_back</span>(v), edge[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">&#x27;D&#x27;</span>)ver[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">&#x27;C&#x27;</span>)ver[u] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">&#x27;T&#x27;</span>)ver[u] = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (!flag || remain[<span class="number">1</span>]) cout &lt;&lt; <span class="string">&quot;NO\n&quot;</span>;<span class="comment">//注意remain[1]里面有东西也是无解的</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;YES\n&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it: ans)</span><br><span class="line">            cout &lt;&lt; it.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; it.second &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>树上贪心问题，这题的贪心策略并不算好想，也融合了树的遍历，树形dp的思想，由于树这种结构天然的适合dp和递归，所以题目就算没有要用树形dp去解也要考虑是否可以利用这个特殊的结构去实现算法，这道题的坑点也很多，像没看到每条边只能经过一次这个条件就会误以为是很简单的一道贪心题，最后关于“Tong”结点的处理也不好想到，很难在短时间内验证正确性<br><a name="wQHBt"></a></p>
<h1 id="H-Puzzle-Tapa"><a href="#H-Puzzle-Tapa" class="headerlink" title="H. Puzzle: Tapa"></a><strong>H. Puzzle: Tapa</strong></h1><p><img src="/2023/08/19/20thZJCPC/PuzzleTapa1.png" alt="PuzzleTapa1"><br><img src="/2023/08/19/20thZJCPC/PuzzleTapa2.png" alt="PuzzleTapa2"></p>
<p>翻译：<br>Grammy是解谜大师，今天，她正在玩一个“Tapa”拼图的变体。在这个变体中，有 (2n − 1)×(2m−1)矩形网格上的n×m个线索。所有线索都位于单元格（i，j）上，其中i，j都很奇怪。每条线索都是一个等于或比周围单元格数小1的数字线索。具体来说，网格角落上的线索可以是2条或3条，网格边缘上的线索可以是4或5并且网格中心上的线索可以是7或8。目标是对一些格子进行遮光，例如即：<br>•所有线索单元格都未加阴影。<br>•每个线索单元格表示其周围连续阴影单元格的数量。<br>左上图显示了一个可能的5×5网格，只有线索，右上图显示了可能的解决谜题的方法，底部的图片显示了一个错误的谜题解决方案，因为阴影4周围的单元格是不连续的。<br>Grammy肯定知道如何解决这个难题，但她决定给你一个小测验。请解开这个谜题。<br>输入<br>第一行包含两个整数n，m（2≤n，m≤50），表示网格的大小。<br>接下来的2n−1行中的每一行都包含2m−1个字符，表示具有给定线索的网格。点（’.’）<br>表示没有线索的单元格，而数字表示单元格上的线索。它保证了<br>奇数行和奇数列的交叉点有一条线索，所有其他单元格都不包含任何线索。<br>输出 <br>如果解决方案不存在，则在单行上输出“NO”。<br>否则，在第一行输出“YES”，然后输出2n−1行，每行包含2m−1个字符，<br>表示谜题的答案。格式类似于输入网格，但您应该标记<br>用“#”对单元格进行着色。换句话说，输出中的点（’.’）表示一个没有线索的无阴影单元格，<br>（’#’）表示带阴影的单元格，数字表示单元格上的线索。<br>如果有多个解决方案，请输出任何一种解决方案。<br>已通过此<a target="_blank" rel="noopener" href="https://qoj.ac/contest/1221/problem/6398">oj</a>的评测<br>2023.08.26<br>大致意思就是扫雷，数字表示周围连续的雷的数量，判断有无解，如果有解就输出任意一种，注意涂色的点必须是联通的。</p>
<p>这题的通过率低到离谱，是除了只有一队通过的C题以外最低的一题，原因可能是题目只说了每个线索单元格表示其周围连续阴影单元格的数量，没有说明要涂色的点必须是联通的，像</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">3.2</span><span class="number">.3</span></span><br><span class="line">.....</span><br><span class="line"><span class="number">5.7</span><span class="number">.5</span></span><br><span class="line">.....</span><br><span class="line"><span class="number">3.5</span><span class="number">.3</span></span><br><span class="line">output:</span><br><span class="line">NO</span><br></pre></td></tr></table></figure>
<p>如果理解为涂色点可以不联通只要最多的联通数量等于给的线索那么输出会是</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line"><span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">3</span>#<span class="number">2</span>#<span class="number">3</span></span><br><span class="line">##.##</span><br><span class="line"><span class="number">5</span>#<span class="number">7</span>#<span class="number">5</span></span><br><span class="line">#####</span><br><span class="line"><span class="number">3.5</span><span class="number">.3</span></span><br></pre></td></tr></table></figure>
<p>由于要求连续，所以有一个很重要的结论：<br>如果合法那么最外圈（除去数字的最外圈）一定全是’#’，原因很简单因为要求连续，像上面的例子给出的就是不合法的，只有最外圈全是’#’才能保证数字的最外圈每个阴影都是连续的。<br>正难则反，假设现在全部都是阴影，如果能去掉一些阴影来满足条件那么就是合法的。将这个想象成一张图，没有’#’的相邻两个数字，即这两个数字周围允许有空白（即不是3,5,8）就是存在一条边，相邻才会有一条边，并且一定不会存在一行像3.4.5.4.3这样隔一列的合法情况，那也就是说奇数行和偶数行可以被两两匹配，就很容易联想到跑一次二分图的最大匹配，一边的点集全是奇数行列，一边的点集全是偶数行列，如果做得到完全匹配那么就是一种合法情况。然后再结合上面的结论可以枚举出二分图的边集：如果都是在最外层的或者都是在里面的并且相邻那么这两个点之间就存在一条边，跑一遍匈牙利算法如果是完全匹配那么就是合法的。<br>需要注意的是二分图不一定的两个集合不是必须按照点来划分，这道题只要能够正确描述点与点之间的关系并且可以判断是不是完全匹配就可以。代码中是将点的集合重新分配一个编号，将这个编号与编号之间的关系作为一条边建二分图，而且因为是用编号映射点，所以：<br>1.下标是从0开始的，与正常的模板相比，数组的初始化一定要初始化成-1，如果没有初始化是0那么就是说明这个下标与第0个点匹配，这样就会出错，并且条件的判断也要从!=0变成!=-1<br>2.输出的时候要考虑映射关系<br>用邻接表存储编号的数组一定要开到1500左右，因为n和m最大都是50，两两组合有50*49/2，所以要开的足够大才不会re</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 1505</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; edge[N];</span><br><span class="line"><span class="type">int</span> n, m, v[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line">vector&lt;PII&gt; vl, vr;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    st[x] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> y: edge[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v[y] == <span class="number">-1</span> || (!st[v[y]] &amp;&amp; <span class="built_in">find</span>(v[y]))) &#123;</span><br><span class="line">            v[y] = x;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">match</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(v, <span class="number">-1</span>, <span class="keyword">sizeof</span> v);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num; ++i) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(st, <span class="literal">false</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">find</span>(i)) ++ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">mat</span><span class="params">(<span class="number">2</span> * n - <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;s: mat) &#123;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c: s)</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;.&#x27;</span>) c = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="type">char</span> t = mat[<span class="number">2</span> * i][<span class="number">2</span> * j];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">&#x27;3&#x27;</span> || t == <span class="string">&#x27;5&#x27;</span> || t == <span class="string">&#x27;8&#x27;</span>)<span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> ((i + j) % <span class="number">2</span> == <span class="number">0</span>)vl.<span class="built_in">emplace_back</span>(i, j);</span><br><span class="line">            <span class="keyword">else</span> vr.<span class="built_in">emplace_back</span>(i, j);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="type">int</span> v1 = (<span class="type">int</span>) vl.<span class="built_in">size</span>(), v2 = (<span class="type">int</span>) vr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span> (v1 != v2) <span class="keyword">return</span> cout &lt;&lt; <span class="string">&quot;NO\n&quot;</span>, <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1; ++i) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [x1, y1] = vl[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; v2; ++j) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [x2, y2] = vr[j];</span><br><span class="line">            <span class="type">int</span> dist = <span class="built_in">abs</span>(x1 - x2) + <span class="built_in">abs</span>(y1 - y2);</span><br><span class="line">            <span class="type">bool</span> isBoundary = (x1 == <span class="number">0</span> &amp;&amp; x2 == <span class="number">0</span>) || (x1 == n - <span class="number">1</span> &amp;&amp; x2 == n - <span class="number">1</span>) ||</span><br><span class="line">                              (y1 == <span class="number">0</span> &amp;&amp; y2 == <span class="number">0</span>) || (y1 == m - <span class="number">1</span> &amp;&amp; y2 == m - <span class="number">1</span>);</span><br><span class="line">            <span class="type">bool</span> isIntern = mat[<span class="number">2</span> * x1][<span class="number">2</span> * y1] == <span class="string">&#x27;7&#x27;</span> &amp;&amp; mat[<span class="number">2</span> * x2][<span class="number">2</span> * y2] == <span class="string">&#x27;7&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (dist == <span class="number">1</span> &amp;&amp; (isBoundary || isIntern)) edge[i].<span class="built_in">push_back</span>(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">match</span>(v1) != v1) cout &lt;&lt; <span class="string">&quot;NO\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;YES\n&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v2; ++i) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [x2, y2] = vr[i];</span><br><span class="line">            <span class="type">int</span> j = v[i];</span><br><span class="line">            <span class="keyword">auto</span> [x1, y1] = vl[j];</span><br><span class="line">            mat[x1 + x2][y1 + y2] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;s: mat) cout &lt;&lt; s &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">struct MBM &#123;</span></span><br><span class="line"><span class="comment">    int L;</span></span><br><span class="line"><span class="comment">    vector&lt;int&gt; match, seen;</span></span><br><span class="line"><span class="comment">    vector&lt;vector&lt;int&gt; &gt; g;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    MBM(int L, int R) : L(L), match(R), seen(R), g(L) &#123;&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    void add_edge(int l, int r) &#123; g[l].push_back(r); &#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    bool dfs(int u) &#123;</span></span><br><span class="line"><span class="comment">        return any_of(g[u].begin(), g[u].end(), [&amp;](int v) &#123;</span></span><br><span class="line"><span class="comment">            if (seen[v]++ == 0 &amp;&amp; (match[v] == -1 || dfs(match[v]))) &#123;</span></span><br><span class="line"><span class="comment">                match[v] = u;</span></span><br><span class="line"><span class="comment">                return true;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            return false;</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    int max_matching() &#123;</span></span><br><span class="line"><span class="comment">        int ans = 0;</span></span><br><span class="line"><span class="comment">        fill(match.begin(), match.end(), -1);</span></span><br><span class="line"><span class="comment">        for (int u = 0; u &lt; L; ++u) &#123;</span></span><br><span class="line"><span class="comment">            fill(seen.begin(), seen.end(), 0); </span></span><br><span class="line"><span class="comment">            ans += dfs(u);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return ans;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>可以像注释里的代码一样定义一个结构体，将所有的初始化，数组长度在结构体初始化的时候申请对应的大小就可以保证空间也不会被浪费。<br>其实还是很套路的一道题，如果题目做多了就会发现棋盘矩阵其实天生的适合划分成两个点集，这些题基本上程序的框架是一样的，的比如像这样黑白染色：<br><img src="/2023/08/19/20thZJCPC/PuzzleTapa3.png" alt="PuzzleTapa3" style="zoom: 50%;"><br>行号加列号是偶数就染黑，奇数就染白，就可以变成黑格是一类点，白格是一类点，黑白相邻格子之间连上一条边，就可以解决这道棋盘覆盖问题：<br><img src="/2023/08/19/20thZJCPC/PuzzleTapa4.png" alt="PuzzleTapa4"></p>
<p><a name="IOCys"></a></p>
<h1 id="I-Equation-Discovering"><a href="#I-Equation-Discovering" class="headerlink" title="I. Equation Discovering"></a>I. Equation Discovering</h1><p><img src="/2023/08/19/20thZJCPC/IEquationDiscovering1.png" alt="IEquationDiscovering1"><br><img src="/2023/08/19/20thZJCPC/IEquationDiscovering2.png" alt="IEquationDiscovering2"></p>
<p>翻译：</p>
<p>Mika教授是一位计算机科学研究人员，他提出了以下问题:给定n对(x,y)，其中1≤n≤20,我们如何找到适用于所有对的控制方程y=f(x)?换句话说，他试图确定一个方程，该方程涉及二元运算符(+，-，x，÷)、一元运算符(sin，cos)、符号x和适用于所有给定对的括号，例如y=x<em>x÷sin(x)或y=x</em>(x+x÷x)。</p>
<p>为了生成所有有效的方程，我们定义了一个上下文无关语法，如下所示:</p>
<p>1.起始符号为S。</p>
<p>2.S→S+S | S-S</p>
<p>3.S→SxS | S+S</p>
<p>4.S→sin(S) | cos(S)</p>
<p>5.S→(S) l x</p>
<p>然而，为了防止过拟合，我们将方程的复杂度限制为小于或等于9，其中复杂度定义为二元运算符(+，-，x，÷)数量的两倍加上方程中一元运算符(sin，cos)数量的一倍。例如，方程x+(x+x<em>x)的复杂度为6，而x</em>sin()的复杂程度为3。只有复杂度小于或等于9的方程才会被认为是正确的。</p>
<p>输入</p>
<p>第一行包含一个整数n(1≤n≤20)，表示要拟合的(x，y)对的数量。以下n行，每行两个实数r，y(zl，&lt;103)，小数点后正好有六位数字，表示(x，y)对。</p>
<p>x的值保证是准确的，我们使用一些有效的方程来生成y的值，然后将其四舍五入到六位数。</p>
<p>输出</p>
<p>输出只有一行表达式f，由’+’、-’、*’(对于x)、/’(对于÷)、’sin’、’cos’、’x’、(’和)’组成。</p>
<p>如果您的答案满足以下条件，则视为正确:</p>
<p>1.表达式f是使用前面描述的上下文无关语法生成的，并且根据该语法是有效的。</p>
<p>2表达式f的复杂度不超过9，并且长度不超过1000个字符。</p>
<p>3.对于每个(z，y)对，f(z)和g之间的绝对或相对误差不大于10</p>
<p>3。即≤10-3</p>
<p>4.在计算除法运算时，被除数的绝对值必须不小于0.01。</p>
<p>留坑待填</p>
<p><a name="xiJVw"></a></p>
<h1 id="赛后总结"><a href="#赛后总结" class="headerlink" title="赛后总结"></a>赛后总结</h1><p>…没去颁奖现场也没找到获奖率的通知，文件里面只写了这些：<br>本届竞赛按本科组、专科组分别进行评奖和设奖，根据每队答题数量及解题时长进行排名。为与国际竞赛获奖名称接轨，特设置奖项如下：<br>颁发金、银、铜奖（牌）：若干名；<br>颁发最佳女队奖（牌）：1名；要求获等级奖的参赛队中，应有3名女生组队，则有资格参评此奖项；<br>颁发顽强拼搏奖（牌）:1名；<br>要求竞赛中表现特别顽强的队伍，如提交某题次数最多、在比赛结束前最后成功通过一题的队伍等，都有可能获此奖项；<br>颁发高校优秀组织奖（牌）：若干名。<br>上述获奖比例按浙江省大学生科技竞赛委员会相关规定执行，奖牌颁发给参赛高校，获奖证书颁发给获奖师生本人。<br>如果按2014年的评奖规则：<br>本届竞赛按本科组、大专组分别进行评奖和设奖，根据每队解答竞赛题目的数目多少及解题程序算式所需时间长短进行排名。评定以下奖项：<br>特等奖：1队（可空缺），颁发奖杯、证书；<br>一等奖：8%参赛队，颁发金牌、证书；<br>二等奖：15%参赛队，颁发银牌、证书；<br>三等奖：25%参赛队，颁发铜牌、证书；<br>特别奖：最佳女队奖（获等级奖的参赛队中，应有3名女生组队，则有资格参评此奖项）、顽强拼搏奖（竞赛中表现特别顽强的队伍，如提交某题次数最多、在比赛结束前最后成功通过一题的队伍等，都有可能获此奖项）、最佳组织奖（颁发给积极参与竞赛的学校）若干，颁发奖牌。<br>优胜奖：未获等级奖和特别奖，但在比赛中至少成功解答一题的队。无证书。<br>成功参赛奖：未获上述奖项的参赛。无证书。</p>
<p>比赛时做了AEFM四道题，按照这个规则来看，如果要拿铜必须要做得快，银牌需要做出K题，做出G题稳银，再做出H题稳金。<br>这次打铁也属于是意料之中了，队友之间的配合明显不算好，可以看出做简单题花时间检查比直接交上去赌对而错了罚时的收益高，但是在做F题的时候仍然出现了一次罚时，这是因为我没有看清题目每次查询都会返回绝对值而不是差值，导致第一次在设计程序的时候总体思路就错了，最后我拍了几组错误的输出发现没错就提交罚时一次，在发现题目看错了又重新设计程序，就因为一个绝对值导致思路和之前的完全不一样，算上罚时总共浪费了一个多小时，导致来不及细想K题最后只解出了四道题，如果以现在补题时的能力来看，前面做的快，留出充足的时间是有可能写五道题拿银。但是金牌的话G题的难度过大不大可能在有限的时间内想出完全正确的贪心，H题更不可能联想到建模成二分图跑最大匹配(其实棋盘建模成二分图是比较套路的做法)<br>总的来说大一没有拿牌还是能力和比赛经验不够，练得太少做不到将想法写成程序，在补题的时候还只是第一次做这种dp，比赛时就更弱了，在写M题的时候写个sort的比较函数都要写半天，最后是一个队友用STL里面的pair加优先队列做出来的。并且英语也很重要，平时英文题也没有练过，比赛时三个人在做题的时候原本的想法是三个人分开看题，结果甚至查英文字典都看不懂题目，都是看哪题通过率高的没写就三个人一起翻译题目，这样做明显降低了读题速度，一直到比赛结束都没看K题以后的题目。并且F题题面都加粗了绝对值但是读完还是忘了…其实在英语题练多了后去打比赛，可以在做完签到题后英语好的两个人读题，一个人从前往后一个人从后往前，另一个在devc++上先打好缺省源顺便看看榜单里面哪一题做的人多，这样可以节省不少时间。<br><a name="QJpMQ"></a></p>
<h2 id="比赛的排名规则"><a href="#比赛的排名规则" class="headerlink" title="比赛的排名规则"></a>比赛的排名规则</h2><p>首先按解题数量排序，每道题权值一样，解题数量越多的排在前面，题数一样多的队伍按时间排（表中的score），时间的具体计算是：每道题第一次ac的时间（单位为分钟）的总和加上已ac的题目中先前提交wa的次数<em>20。像我们队解出AEMF的时间分别是比赛开始后的10，49，95，210，其中F题罚时一次，那么总时间就是10+49+95+210+20</em>1 = 384,所以四题里用时比我们长的都排在后面<br><a name="yjSUR"></a></p>
<h2 id="终榜"><a href="#终榜" class="headerlink" title="终榜"></a><a target="_blank" rel="noopener" href="https://acm.hznu.edu.cn/domjudge/scoreboard/">终榜</a></h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">z01prime</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="http://z01prime.github.io/2023/08/20/20thZJCPC/">http://z01prime.github.io/2023/08/20/20thZJCPC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">z01prime</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B5%99%E6%B1%9F/">浙江</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/18/%E5%AF%B9%E6%8B%8D%E5%99%A8%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90/" title="对拍器与数据生成"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">对拍器与数据生成</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/18/%E7%AE%97%E6%B3%95%E5%A4%A7%E8%B5%9B2023-%E6%9D%91%E5%BA%84/" title="算法大赛2023-村庄"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法大赛2023-村庄</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">z01prime</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/z01prime"><i class="fab fa-github"></i><span>我的github主页</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/z01prime" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:z7296091@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">加载慢可以挂个梯子试试捏</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#A-Look-and-Say"><span class="toc-number">1.</span> <span class="toc-text">A.Look and Say</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#E-Interval-Sum"><span class="toc-number">2.</span> <span class="toc-text">E.Interval Sum</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#M-A-Wine-and-Four-Dishes"><span class="toc-number">3.</span> <span class="toc-text">M.A Wine and Four Dishes</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#F-Turn-the-Light"><span class="toc-number">4.</span> <span class="toc-text">F.Turn the Light</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#K-Lazy-but-Diligent"><span class="toc-number">5.</span> <span class="toc-text">K. Lazy but Diligent</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#G-Puzzle-Kusabi"><span class="toc-number">6.</span> <span class="toc-text">G. Puzzle: Kusabi</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#H-Puzzle-Tapa"><span class="toc-number">7.</span> <span class="toc-text">H. Puzzle: Tapa</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#I-Equation-Discovering"><span class="toc-number">8.</span> <span class="toc-text">I. Equation Discovering</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93"><span class="toc-number">9.</span> <span class="toc-text">赛后总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%B5%9B%E7%9A%84%E6%8E%92%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-number">9.1.</span> <span class="toc-text">比赛的排名规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%88%E6%A6%9C"><span class="toc-number">9.2.</span> <span class="toc-text">终榜</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/15/ICPC2023-HangZhou-R-%E7%AD%BE%E5%88%B0-%E9%93%9C%E7%89%8C%E9%A2%98/" title="ICPC2023 HangZhou R 签到+铜牌题">ICPC2023 HangZhou R 签到+铜牌题</a><time datetime="2024-02-15T04:00:33.000Z" title="发表于 2024-02-15 12:00:33">2024-02-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/13/01%E5%AD%97%E5%85%B8%E6%A0%91/" title="01字典树">01字典树</a><time datetime="2024-02-13T03:54:17.000Z" title="发表于 2024-02-13 11:54:17">2024-02-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/09/%E6%A0%B9%E5%8F%B7%E5%88%86%E6%B2%BB/" title="根号分治">根号分治</a><time datetime="2024-02-09T03:22:55.000Z" title="发表于 2024-02-09 11:22:55">2024-02-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/07/hexo-github%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/" title="hexo+github个人网站开发">hexo+github个人网站开发</a><time datetime="2024-02-07T12:32:18.000Z" title="发表于 2024-02-07 20:32:18">2024-02-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/06/%E5%85%B3%E4%BA%8Eubuntu/" title="关于ubuntu">关于ubuntu</a><time datetime="2024-01-06T05:24:10.000Z" title="发表于 2024-01-06 13:24:10">2024-01-06</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://source.fomal.cc/img/dm8.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By z01prime</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'e8f61b4db601b696558e',
      clientSecret: '2f5cacaf3b111d5db02b1b40be93f02553bf9aa4',
      repo: 'commetForGitalk',
      owner: 'z01prime',
      admin: ['z01prime'],
      id: '968d91d21f42015526cc2503d950b901',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.textContent= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="25" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>